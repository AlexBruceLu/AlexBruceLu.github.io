[{"title":"æ¯’ä¸¸è®¡åˆ’ï¼šé˜²æ­¢æ¶æ„æ”¶è´­","url":"/2019/12/10/æ¯’ä¸¸è®¡åˆ’/","content":"\n@[TOC]\n\n","tags":["é‡‘èž"],"categories":["é˜…è¯»","é‡‘èž"]},{"title":"æ æ†æ”¶è´­ï¼šåŽå°”è¡—é»„é‡‘æ¸¸æˆ","url":"/2019/12/10/æ æ†æ”¶è´­/","content":"\n@[TOC]\n\n","tags":["é‡‘èž"],"categories":["é˜…è¯»","é‡‘èž"]},{"title":"Ubuntu 16.04 å®‰è£… CUDA","url":"/2019/12/09/Ubuntu_16.04å®‰è£…cudaä¸åŒç‰ˆæœ¬/","content":"\n@[TOC]\n\n## **ä¸€ã€æ“ä½œç³»ç»Ÿ:**\n\nç ”å‘å·¥ç¨‹å¸ˆé»˜è®¤éƒ½æ˜¯å°å¼æœºï¼Œå®‰è£…ubuntu16.04æ“ä½œç³»ç»Ÿï¼Œé»˜è®¤æˆ‘ä»¬å®‰è£…å¥½cudaå’Œæ˜¾å¡é©±åŠ¨ç›¸å…³è½¯ä»¶ã€‚å¦‚æžœéœ€è¦é‡è£…ç³»ç»Ÿè¯·è”ç³»å„å±žåœ°ITï¼Œç›®å‰é‡‡ç”¨USBè‡ªåŠ¨å®‰è£…çš„æ–¹å¼ï¼Œ10åˆ†é’Ÿå†…å¯ä»¥å®‰è£…å®Œæˆ\n\n## **äºŒã€å¸è½½åŽŸæœ‰çš„é©±åŠ¨å’Œcuda:**\n\nsudo su root\n\nservice lightdm stop\n\nnvidia-uninstall\n\napt-get install autoremove --purge nvidia*\n\n/usr/local/cuda-8.0/bin/uninstall_cuda-8.0.pl(æ ¹æ®ç‰ˆæœ¬å·æœ‰å·®åˆ«ï¼Œæ­¤å¤„ä»¥8.0ä¸ºä¾‹å­)\n\nrm -rf /usr/local/cuda-8.0(!!!æ‰§è¡Œè¿™ä¸€æ­¥æ—¶åˆ‡å‹¿è¯¯æ“ä½œï¼Œå¦åˆ™å®¹æ˜“å¯¼è‡´ç³»ç»Ÿå´©æºƒ)\n\n## **ä¸‰ã€cudaå®‰è£…ï¼šåŒ…å«æ˜¾å¡é©±åŠ¨å’Œç›¸å…³è½¯ä»¶åŒ…**\n\n### 1.ä¸‹è½½cudaè½¯ä»¶\n\n**ï¼ˆ8.0ç‰ˆæœ¬ï¼‰** wget https://developer.nvidia.com/compute/cuda/8.0/Prod2/local_installers/cuda_8.0.61_375.26_linux-run\n\n**ï¼ˆ9.0ç‰ˆæœ¬ï¼‰** wget https://developer.nvidia.com/compute/cuda/9.0/Prod/local_installers/cuda_9.0.176_384.81_linux-run\n\n**ï¼ˆ10.0ç‰ˆæœ¬ï¼‰**wget https://developer.nvidia.com/compute/cuda/10.0/Prod/local_installers/cuda_10.0.130_410.48_linux\n\n**ï¼ˆ10.1ç‰ˆæœ¬ï¼‰** \n\nâ€‹\t\twget http://developer.download.nvidia.com/compute/cuda/10.1/Prod/local_installers/cuda_10.1.243_418.87.00_linux.run\n\n**ï¼ˆ10.2ç‰ˆæœ¬ï¼‰**\n\nâ€‹\t\t wget http://developer.download.nvidia.com/compute/cuda/10.2/Prod/local_installers/cuda_10.2.89_440.33.01_linux.run\n\n### 2.ä¸‹è½½NVIDIAæ˜¾å¡é©±åŠ¨\n\nwget http://cn.download.nvidia.com/XFree86/Linux-x86_64/440.36/NVIDIA-Linux-x86_64-440.36.run\n\n### 3.æ·»åŠ å®‰è£…ç¨‹åºçš„å¯æ‰§è¡Œæƒé™ï¼š\n\nchmod +x *.run\n\n### 4.ç¦ç”¨é»˜è®¤çš„nouveauå¼€æºæ˜¾å¡é©±åŠ¨ï¼š\n\necho \"blacklist nouveau\" >> /etc/modprobe.d/blacklist-nouveau.conf\n\nä¹‹åŽå»ºè®®é‡å¯ä¸‹ç³»ç»Ÿ\n\n### 5.å…³é—­ç³»ç»Ÿå›¾å½¢ç•Œé¢ï¼Œæ˜¾å¡é©±åŠ¨å®‰è£…è¿‡ç¨‹éœ€è¦åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹è¿›è¡Œï¼ˆCtrl + Alt + F2 è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼‰\n\n```\nsudo su root\n\nservice lightdm stop\n```\n\n### 6.å®‰è£…æ˜¾å¡é©±åŠ¨ç¨‹åºï¼Œå‘½ä»¤ï¼š\n\n```\n./NVIDIA-Linux-x86_64-410.78.run -a -s -Z --no-opengl-files\n```\n\n### 7.å®‰è£…CUDA-9.0 é©±åŠ¨ï¼ˆè¯·æŠŠcudaå®‰è£…ç¨‹åºå’Œå®‰è£…ç›®æ ‡ç›®å½•æ›¿æ¢ä¸ºè‡ªå·±éœ€è¦å®‰è£…çš„å¯¹åº”ç‰ˆæœ¬ï¼‰\n\n```\n./cuda_9.0.176_384.81_linux.run --no-opengl-libs --toolkit --samples --samplespath=/usr/local/cuda-9.0 -silent\n```\n\n### 8.æ·»åŠ å®‰è£…çš„çŽ¯å¢ƒå˜é‡ï¼ˆå°†çº¢è‰²éƒ¨åˆ†æ›¿æ¢ä¸ºè‡ªå·±å®‰è£…çš„å¯¹åº”ç‰ˆæœ¬ï¼‰:\n\n```\necho 'export LD_LIBRARY_PATH=/usr/local/cuda/lib:/usr/local/cuda/lib64/:/usr/local/cuda-9.0/lib:/usr/local/cuda-9.0/lib64/:$LD_LIBRARY_PATH' >> /etc/profile\necho 'export PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/cuda-9.0/bin:/usr/local/cuda/bin:$PATH' >> /etc/profile\necho '/usr/local/cuda/lib64' >> /etc/ld.so.conf.d/cuda.conf\n\nldconfig\n```\n\n### 9.ä¸‹è½½cudnn\n\n- **Download cuDNN v7.6.5 (November 18th, 2019), for CUDA 10.2**\n\n  ```bash\n   wget https://developer.nvidia.com/compute/machine-learning/cudnn/secure/7.6.5.32/Production/10.2_20191118/cudnn-10.2-linux-x64-v7.6.5.32.tgz\n  ```\n\n- **Download cuDNN v7.6.5 (November 5th, 2019), for CUDA 10.1**\n\n  ```\n  wget https://developer.nvidia.com/compute/machine-learning/cudnn/secure/7.6.5.32/Production/10.1_20191031/cudnn-10.1-linux-x64-v7.6.5.32.tgz\n  ```\n\n- **Download cuDNN v7.6.4 (September 27, 2019), for CUDA 10.0**\n\n  ```\n  wget https://developer.nvidia.com/compute/machine-learning/cudnn/secure/7.6.4.38/Production/10.0_20190923/cudnn-10.0-linux-x64-v7.6.4.38.tgz\n  ```\n\n- **Download cuDNN v7.6.3 (August 23, 2019), for CUDA 9.0**\n\n  ```\n  wget https://developer.nvidia.com/compute/machine-learning/cudnn/secure/7.6.3.30/Production/9.0_20190822/cudnn-9.0-linux-x64-v7.6.3.30.tgz\n  ```\n\n- **Download cuDNN v7.1.3 (April 17, 2018), for CUDA 8.0**\n\n  ```\n  wget https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v7.1.3/prod/8.0_20180414/cudnn-8.0-linux-x64-v7.1\n  ```\n\n### 10.å®‰è£…cudnn\n\n```\ntar xf cudnn-9.0-linux-x64-v7.tar\nmv cuda/lib64/libcudnn* /usr/local/cuda-9.0/lib64/\nmv cuda/include/cudnn.h /usr/local/cuda-9.0/include/\n```","tags":["ubuntu","CUDA"],"categories":["Linux","NVIDIA"]},{"title":"git æ–°å»ºä»“åº“ï¼Œæ·»åŠ è¿œç¨‹åˆ†ä¹‹åˆ°æœ¬åœ°","url":"/2019/12/09/go_modåŸºç¡€ç¯‡/","content":"\n@[TOC]\n\n## å‡†å¤‡\n\n### å¼€å¯go mod\n\n1. æŠŠ golang å‡çº§åˆ° 1.11ï¼ˆçŽ°åœ¨1.13 å·²ç»å‘å¸ƒäº†ï¼Œå»ºè®®ä½¿ç”¨1.13ï¼‰\n2. è®¾ç½® `GO111MODULE`\n\nGO111MODULE\n\n`GO111MODULE` æœ‰ä¸‰ä¸ªå€¼ï¼š`off`, `on`å’Œ`autoï¼ˆé»˜è®¤å€¼ï¼‰`ã€‚\n\n- `GO111MODULE=off`ï¼Œgoå‘½ä»¤è¡Œå°†ä¸ä¼šæ”¯æŒmoduleåŠŸèƒ½ï¼Œå¯»æ‰¾ä¾èµ–åŒ…çš„æ–¹å¼å°†ä¼šæ²¿ç”¨æ—§ç‰ˆæœ¬é‚£ç§é€šè¿‡vendorç›®å½•æˆ–è€…GOPATHæ¨¡å¼æ¥æŸ¥æ‰¾ã€‚\n- `GO111MODULE=on`ï¼Œgoå‘½ä»¤è¡Œä¼šä½¿ç”¨modulesï¼Œè€Œä¸€ç‚¹ä¹Ÿä¸ä¼šåŽ»GOPATHç›®å½•ä¸‹æŸ¥æ‰¾ã€‚\n- `GO111MODULE=auto`ï¼Œé»˜è®¤å€¼ï¼Œgoå‘½ä»¤è¡Œå°†ä¼šæ ¹æ®å½“å‰ç›®å½•æ¥å†³å®šæ˜¯å¦å¯ç”¨moduleåŠŸèƒ½ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å½¢ï¼š\n  - å½“å‰ç›®å½•åœ¨GOPATH/srcä¹‹å¤–ä¸”è¯¥ç›®å½•åŒ…å«go.modæ–‡ä»¶\n  - å½“å‰æ–‡ä»¶åœ¨åŒ…å«go.modæ–‡ä»¶çš„ç›®å½•ä¸‹é¢ã€‚\n\n> å½“modules åŠŸèƒ½å¯ç”¨æ—¶ï¼Œä¾èµ–åŒ…çš„å­˜æ”¾ä½ç½®å˜æ›´ä¸º`$GOPATH/pkg`ï¼Œå…è®¸åŒä¸€ä¸ªpackageå¤šä¸ªç‰ˆæœ¬å¹¶å­˜ï¼Œä¸”å¤šä¸ªé¡¹ç›®å¯ä»¥å…±äº«ç¼“å­˜çš„ moduleã€‚\n\n```bash\nexport GO111MODULE=on\n```\n\n### go modå¸¸ç”¨å‘½ä»¤\n\ngolang æä¾›äº† `go mod`å‘½ä»¤æ¥ç®¡ç†åŒ…ã€‚\n\ngo mod æœ‰ä»¥ä¸‹å‘½ä»¤ï¼š\n\n| å‘½ä»¤     | è¯´æ˜Ž                                                         |\n| -------- | ------------------------------------------------------------ |\n| download | download modules to local cache(ä¸‹è½½ä¾èµ–åŒ…)                  |\n| edit     | edit go.mod from tools or scriptsï¼ˆç¼–è¾‘go.mod                |\n| graph    | print module requirement graph (æ‰“å°æ¨¡å—ä¾èµ–å›¾)              |\n| init     | initialize new module in current directoryï¼ˆåœ¨å½“å‰ç›®å½•åˆå§‹åŒ–modï¼‰ |\n| tidy     | add missing and remove unused modules(æ‹‰å–ç¼ºå°‘çš„æ¨¡å—ï¼Œç§»é™¤ä¸ç”¨çš„æ¨¡å—) |\n| vendor   | make vendored copy of dependencies(å°†ä¾èµ–å¤åˆ¶åˆ°vendorä¸‹)     |\n| verify   | verify dependencies have expected content (éªŒè¯ä¾èµ–æ˜¯å¦æ­£ç¡®ï¼‰ |\n| why      | explain why packages or modules are needed(è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–) |\n\n## åœ¨é¡¹ç›®ä¸­ä½¿ç”¨\n\n### ç¤ºä¾‹ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®\n\n1. åœ¨`GOPATH ç›®å½•ä¹‹å¤–`æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå¹¶ä½¿ç”¨`go mod init` åˆå§‹åŒ–ç”Ÿæˆ`go.mod` æ–‡ä»¶\n\n```\nâžœ  ~ mkdir hello\nâžœ  ~ cd hello\nâžœ  hello go mod init hello\ngo: creating new go.mod: module hello\nâžœ  hello ls\ngo.mod\nâžœ  hello cat go.mod\nmodule hello\n\ngo 1.12\n```\n\n> go.modæ–‡ä»¶ä¸€æ—¦åˆ›å»ºåŽï¼Œå®ƒçš„å†…å®¹å°†ä¼šè¢«go toolchainå…¨é¢æŽŒæŽ§ã€‚go toolchainä¼šåœ¨å„ç±»å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œæ¯”å¦‚go getã€go buildã€go modç­‰ä¿®æ”¹å’Œç»´æŠ¤go.modæ–‡ä»¶ã€‚\n\ngo.mod æä¾›äº†`module`, `require`ã€`replace`å’Œ`exclude` å››ä¸ªå‘½ä»¤\n\n- `module` è¯­å¥æŒ‡å®šåŒ…çš„åå­—ï¼ˆè·¯å¾„ï¼‰\n- `require` è¯­å¥æŒ‡å®šçš„ä¾èµ–é¡¹æ¨¡å—\n- `replace` è¯­å¥å¯ä»¥æ›¿æ¢ä¾èµ–é¡¹æ¨¡å—\n- `exclude` è¯­å¥å¯ä»¥å¿½ç•¥ä¾èµ–é¡¹æ¨¡å—\n\n1. æ·»åŠ ä¾èµ–\n\næ–°å»ºä¸€ä¸ª server.go æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š\n\n```\npackage main\n\nimport (\n    \"net/http\"\n    \n    \"github.com/labstack/echo\"\n)\n\nfunc main() {\n    e := echo.New()\n    e.GET(\"/\", func(c echo.Context) error {\n        return c.String(http.StatusOK, \"Hello, World!\")\n    })\n    e.Logger.Fatal(e.Start(\":1323\"))\n}\n```\n\næ‰§è¡Œ `go run server.go` è¿è¡Œä»£ç ä¼šå‘çŽ° go mod ä¼šè‡ªåŠ¨æŸ¥æ‰¾ä¾èµ–è‡ªåŠ¨ä¸‹è½½ï¼š\n\n```\n$ go run server.go\ngo: finding github.com/labstack/echo v3.3.10+incompatible\ngo: downloading github.com/labstack/echo v3.3.10+incompatible\ngo: extracting github.com/labstack/echo v3.3.10+incompatible\ngo: finding github.com/labstack/gommon/color latest\ngo: finding github.com/labstack/gommon/log latest\ngo: finding github.com/labstack/gommon v0.2.8\n# æ­¤å¤„çœç•¥å¾ˆå¤šè¡Œ\n...\n\n   ____    __\n  / __/___/ /  ___\n / _// __/ _ \\/ _ \\\n/___/\\__/_//_/\\___/ v3.3.10-dev\nHigh performance, minimalist Go web framework\nhttps://echo.labstack.com\n____________________________________O/_______\n                                    O\\\nâ‡¨ http server started on [::]:1323\n```\n\nçŽ°åœ¨æŸ¥çœ‹go.mod å†…å®¹ï¼š\n\n```\n$ cat go.mod\n\nmodule hello\n\ngo 1.12\n\nrequire (\n    github.com/labstack/echo v3.3.10+incompatible // indirect\n    github.com/labstack/gommon v0.2.8 // indirect\n    github.com/mattn/go-colorable v0.1.1 // indirect\n    github.com/mattn/go-isatty v0.0.7 // indirect\n    github.com/valyala/fasttemplate v1.0.0 // indirect\n    golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a // indirect\n)\n```\n\ngo module å®‰è£… package çš„åŽŸå‰‡æ˜¯å…ˆæ‹‰æœ€æ–°çš„ release tagï¼Œè‹¥æ— tagåˆ™æ‹‰æœ€æ–°çš„commitï¼Œè¯¦è§ [Moduleså®˜æ–¹ä»‹ç»](https://github.com/golang/go/wiki/Modules)ã€‚ go ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª go.sum æ–‡ä»¶æ¥è®°å½• dependency treeï¼š\n\n```\n$ cat go.sum\ngithub.com/labstack/echo v3.3.10+incompatible h1:pGRcYk231ExFAyoAjAfD85kQzRJCRI8bbnE7CX5OEgg=\ngithub.com/labstack/echo v3.3.10+incompatible/go.mod h1:0INS7j/VjnFxD4E2wkz67b8cVwCLbBmJyDaka6Cmk1s=\ngithub.com/labstack/gommon v0.2.8 h1:JvRqmeZcfrHC5u6uVleB4NxxNbzx6gpbJiQknDbKQu0=\ngithub.com/labstack/gommon v0.2.8/go.mod h1:/tj9csK2iPSBvn+3NLM9e52usepMtrd5ilFYA+wQNJ4=\ngithub.com/mattn/go-colorable v0.1.1 h1:G1f5SKeVxmagw/IyvzvtZE4Gybcc4Tr1tf7I8z0XgOg=\ngithub.com/mattn/go-colorable v0.1.1/go.mod h1:FuOcm+DKB9mbwrcAfNl7/TZVBZ6rcnceauSikq3lYCQ=\n... çœç•¥å¾ˆå¤šè¡Œ\n```\n\n1. å†æ¬¡æ‰§è¡Œè„šæœ¬ `go run server.go` å‘çŽ°è·³è¿‡äº†æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–çš„æ­¥éª¤ã€‚\n2. å¯ä»¥ä½¿ç”¨å‘½ä»¤ `go list -m -u all` æ¥æ£€æŸ¥å¯ä»¥å‡çº§çš„packageï¼Œä½¿ç”¨`go get -u need-upgrade-package` å‡çº§åŽä¼šå°†æ–°çš„ä¾èµ–ç‰ˆæœ¬æ›´æ–°åˆ°go.mod\n   - ä¹Ÿå¯ä»¥ä½¿ç”¨ `go get -u` å‡çº§æ‰€æœ‰ä¾èµ–\n\n#### go get å‡çº§\n\n- è¿è¡Œ go get -u å°†ä¼šå‡çº§åˆ°æœ€æ–°çš„æ¬¡è¦ç‰ˆæœ¬æˆ–è€…ä¿®è®¢ç‰ˆæœ¬(x.y.z, zæ˜¯ä¿®è®¢ç‰ˆæœ¬å·ï¼Œ yæ˜¯æ¬¡è¦ç‰ˆæœ¬å·)\n- è¿è¡Œ go get -u=patch å°†ä¼šå‡çº§åˆ°æœ€æ–°çš„ä¿®è®¢ç‰ˆæœ¬\n- è¿è¡Œ go get package@version å°†ä¼šå‡çº§åˆ°æŒ‡å®šçš„ç‰ˆæœ¬å·version\n- è¿è¡Œgo getå¦‚æžœæœ‰ç‰ˆæœ¬çš„æ›´æ”¹ï¼Œé‚£ä¹ˆgo.modæ–‡ä»¶ä¹Ÿä¼šæ›´æ”¹\n\n### ç¤ºä¾‹äºŒï¼šæ”¹é€ çŽ°æœ‰é¡¹ç›®(helloword)\n\né¡¹ç›®ç›®å½•ä¸ºï¼š\n\n```\n$ tree\n.\nâ”œâ”€â”€ api\nâ”‚   â””â”€â”€ apis.go\nâ””â”€â”€ server.go\n\n1 directory, 2 files\n```\n\nserver.go æºç ä¸ºï¼š\n\n```\npackage main\n\nimport (\n    api \"./api\"  // è¿™é‡Œä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„\n    \"github.com/labstack/echo\"\n)\n\nfunc main() {\n    e := echo.New()\n    e.GET(\"/\", api.HelloWorld)\n    e.Logger.Fatal(e.Start(\":1323\"))\n}\n```\n\napi/apis.go æºç ä¸ºï¼š\n\n```\npackage api\n\nimport (\n    \"net/http\"\n\n    \"github.com/labstack/echo\"\n)\n\nfunc HelloWorld(c echo.Context) error {\n    return c.JSON(http.StatusOK, \"hello world\")\n}\n```\n\n1. ä½¿ç”¨ `go mod init ***` åˆå§‹åŒ–go.mod\n\n```\n$ go mod init helloworld\ngo: creating new go.mod: module helloworld\n```\n\n1. è¿è¡Œ `go run server.go`\n\n```\ngo: finding github.com/labstack/gommon/color latest\ngo: finding github.com/labstack/gommon/log latest\ngo: finding golang.org/x/crypto/acme/autocert latest\ngo: finding golang.org/x/crypto/acme latest\ngo: finding golang.org/x/crypto latest\nbuild command-line-arguments: cannot find module for path _/home/gs/helloworld/api\n```\n\né¦–å…ˆè¿˜æ˜¯ä¼šæŸ¥æ‰¾å¹¶ä¸‹è½½å®‰è£…ä¾èµ–ï¼Œç„¶åŽè¿è¡Œè„šæœ¬ `server.go`ï¼Œè¿™é‡Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š\n\n```\nbuild command-line-arguments: cannot find module for path _/home/gs/helloworld/api\n```\n\nä½†æ˜¯`go.mod` å·²ç»æ›´æ–°ï¼š\n\n```\n$ cat go.mod\nmodule helloworld\n\ngo 1.12\n\nrequire (\n        github.com/labstack/echo v3.3.10+incompatible // indirect\n        github.com/labstack/gommon v0.2.8 // indirect\n        github.com/mattn/go-colorable v0.1.1 // indirect\n        github.com/mattn/go-isatty v0.0.7 // indirect\n        github.com/valyala/fasttemplate v1.0.0 // indirect\n        golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a // indirect\n)\n```\n\n#### é‚£ä¸ºä»€ä¹ˆä¼šæŠ›å‡ºè¿™ä¸ªé”™è¯¯å‘¢ï¼Ÿ\n\nè¿™æ˜¯å› ä¸º server.go ä¸­ä½¿ç”¨ internal package çš„æ–¹æ³•è·Ÿä»¥å‰å·²ç»ä¸åŒäº†ï¼Œç”±äºŽ go.modä¼šæ‰«æåŒå·¥ä½œç›®å½•ä¸‹æ‰€æœ‰ package å¹¶ä¸”`å˜æ›´å¼•å…¥æ–¹æ³•`ï¼Œå¿…é¡»å°† helloworldå½“æˆè·¯å¾„çš„å‰ç¼€ï¼Œä¹Ÿå°±æ˜¯éœ€è¦å†™æˆ import helloworld/apiï¼Œä»¥å¾€ GOPATH/dep æ¨¡å¼å…è®¸çš„ import ./api å·²ç»å¤±æ•ˆï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹è¿™ä¸ª [issue](https://github.com/golang/go/issues/26645)ã€‚\n\n1. æ›´æ–°æ—§çš„package import æ–¹å¼\n\næ‰€ä»¥server.go éœ€è¦æ”¹å†™æˆï¼š\n\n```\npackage main\n\nimport (\n    api \"helloworld/api\"  // è¿™æ˜¯æ›´æ–°åŽçš„å¼•å…¥æ–¹æ³•\n    \"github.com/labstack/echo\"\n)\n\nfunc main() {\n    e := echo.New()\n    e.GET(\"/\", api.HelloWorld)\n    e.Logger.Fatal(e.Start(\":1323\"))\n}\n```\n\n> `ä¸€ä¸ªå°å‘`ï¼šå¼€å§‹åœ¨golang1.11 ä¸‹ä½¿ç”¨go mod é‡åˆ°è¿‡ `go build github.com/valyala/fasttemplate: module requires go 1.12` [è¿™ç§é”™è¯¯](https://github.com/golang/go/issues/27565)ï¼Œé‡åˆ°ç±»ä¼¼è¿™ç§éœ€è¦å‡çº§åˆ°1.12 çš„é—®é¢˜ï¼Œç›´æŽ¥å‡çº§golang1.12 å°±å¥½äº†ã€‚å¹¸äºæ˜¯åœ¨1.12 å‘å¸ƒåŽæ‰å°è¯•çš„`go mod` ðŸ¤·â€â™‚ï¸\n\n1. åˆ°è¿™é‡Œå°±å’Œæ–°åˆ›å»ºä¸€ä¸ªé¡¹ç›®æ²¡ä»€ä¹ˆåŒºåˆ«äº†\n\n#### ä½¿ç”¨replaceæ›¿æ¢æ— æ³•ç›´æŽ¥èŽ·å–çš„package\n\nç”±äºŽæŸäº›å·²çŸ¥çš„åŽŸå› ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„packageéƒ½èƒ½æˆåŠŸä¸‹è½½ï¼Œæ¯”å¦‚ï¼š`golang.org`ä¸‹çš„åŒ…ã€‚\n\nmodules å¯ä»¥é€šè¿‡åœ¨ go.mod æ–‡ä»¶ä¸­ä½¿ç”¨ replace æŒ‡ä»¤æ›¿æ¢æˆgithubä¸Šå¯¹åº”çš„åº“ï¼Œæ¯”å¦‚ï¼š\n\n```\nreplace (\n    golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a => github.com/golang/crypto v0.0.0-20190313024323-a1f597ede03a\n)\n```\n\næˆ–è€…\n\n```\nreplace golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a => github.com/golang/crypto v0.0.0-20190313024323-a1f597ede03a\n```\n\n## å‚è€ƒé“¾æŽ¥\n\n- [Moduleså®˜æ–¹ä»‹ç»](https://github.com/golang/go/wiki/Modules)\n- [Golang 1.11 æ–°åŠŸèƒ½ä»‹ç´¹ â€“ Modules](https://www.lightblue.asia/golang-1-11-new-festures-modules/?doing_wp_cron=1552464864.6369309425354003906250)\n- [What are Go modules and how do I use them?](https://talks.godoc.org/github.com/myitcv/talks/2018-08-15-glug-modules/main.slide#1)\n- [go mod doesn't work for github.com/gomarkdown/markdown/html](https://github.com/golang/go/issues/27565)\n- [å†æŽ¢go modulesï¼šä½¿ç”¨ä¸Žç»†èŠ‚](https://www.cnblogs.com/apocelipes/p/10295096.html)\n- [åˆçª¥Go module](https://tonybai.com/2018/07/15/hello-go-module/)\n\n#### References\n\n[1] Moduleså®˜æ–¹ä»‹ç»: [https://github.com/golang/go/...](https://github.com/golang/go/wiki/Modules)\n[2] issue: [https://github.com/golang/go/...](https://github.com/golang/go/issues/26645)\n[3] è¿™ç§é”™è¯¯: [https://github.com/golang/go/...](https://github.com/golang/go/issues/27565)\n[4] Moduleså®˜æ–¹ä»‹ç»: [https://github.com/golang/go/...](https://github.com/golang/go/wiki/Modules)\n[5] Golang 1.11 æ–°åŠŸèƒ½ä»‹ç´¹ â€“ Modules: [https://www.lightblue.asia/go...](https://www.lightblue.asia/golang-1-11-new-festures-modules/?doing_wp_cron=1552464864.6369309425354003906250)\n[6] What are Go modules and how do I use them?: [https://talks.godoc.org/githu...](https://talks.godoc.org/github.com/myitcv/talks/2018-08-15-glug-modules/main.slide#1)\n[7] go mod doesn't work for github.com/gomarkdown/markdown/html : [https://github.com/golang/go/...](https://github.com/golang/go/issues/27565)\n[8] å†æŽ¢go modulesï¼šä½¿ç”¨ä¸Žç»†èŠ‚: [https://www.cnblogs.com/apoce...](https://www.cnblogs.com/apocelipes/p/10295096.html)\n[9] åˆçª¥Go module: [https://tonybai.com/2018/07/1...](https://tonybai.com/2018/07/15/hello-go-module/)","tags":["go","go mod"],"categories":["ç¼–ç¨‹è¯­è¨€","GO"]},{"title":"git æ–°å»ºä»“åº“ï¼Œæ·»åŠ è¿œç¨‹åˆ†ä¹‹åˆ°æœ¬åœ°","url":"/2019/12/09/gitæ–°å»ºä»“åº“/","content":"\n@[TOC]\n\n### æœ¬åœ°ä¸å­˜åœ¨ä»“åº“æ‹‰å–è¿œç¨‹åˆ†ä¹‹\n\n\n\n```\necho \"# gin-web\" >> README.md\ngit init\ngit add README.md\ngit commit -m \"first commit\"\ngit remote add origin https://github.com/AlexBruceLu/gin-web.git\ngit push -u origin master\n```\n\n### æœ¬åœ°å·²æœ‰çš„ä»“åº“æ·»åŠ åˆ°è¿œç¨‹\n\n\n\n```\ngit remote add origin https://github.com/AlexBruceLu/gin-web.git\ngit push -u origin master\n```","tags":["git"],"categories":["å·¥å…·","git"]},{"title":"Ubuntu 16.04 å‡çº§æœ€æ–°ç‰ˆæœ¬ nvidia-docker","url":"/2019/12/09/Ubuntu16.04å‡çº§æœ€æ–°ç‰ˆæœ¬nvidia-docker/","content":"\n@[TOC]\n\n### Uninstall old versions\n\nOlder versions of Docker were called `docker`, `docker.io `, or `docker-engine`. If these are installed, uninstall them:\n\n```\n$ sudo apt-get remove docker docker-engine docker.io containerd runc\n```\n\nItâ€™s OK if `apt-get` reports that none of these packages are installed.\n\nThe contents of `/var/lib/docker/`, including images, containers, volumes, and networks, are preserved. The Docker Engine - Community package is now called `docker-ce`.\n\n### Supported storage drivers\n\nDocker Engine - Community on Ubuntu supports `overlay2`, `aufs` and `btrfs` storage drivers.\n\n> **Note**: In Docker Engine - Enterprise, `btrfs` is only supported on SLES. See the documentation on [btrfs](https://docs.docker.com/engine/userguide/storagedriver/btrfs-driver/) for more details.\n\nFor new installations on version 4 and higher of the Linux kernel, `overlay2` is supported and preferred over `aufs`. Docker Engine - Community uses the `overlay2` storage driver by default. If you need to use `aufs` instead, you need to configure it manually. See [aufs](https://docs.docker.com/engine/userguide/storagedriver/aufs-driver/)\n\n### Install Docker Engine - Community\n\nYou can install Docker Engine - Community in different ways, depending on your needs:\n\n- Most users [set up Dockerâ€™s repositories](https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-using-the-repository) and install from them, for ease of installation and upgrade tasks. This is the recommended approach.\n- Some users download the DEB package and [install it manually](https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-from-a-package) and manage upgrades completely manually. This is useful in situations such as installing Docker on air-gapped systems with no access to the internet.\n- In testing and development environments, some users choose to use automated [convenience scripts](https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-using-the-convenience-script) to install Docker.\n\n### Install using the repository\n\nBefore you install Docker Engine - Community for the first time on a new host machine, you need to set up the Docker repository. Afterward, you can install and update Docker from the repository.\n\n#### SET UP THE REPOSITORY\n\n1. Update the `apt` package index:\n\n   ```\n   $ sudo apt-get update\n   ```\n\n2. Install packages to allow `apt` to use a repository over HTTPS:\n\n   ```\n   $ sudo apt-get install \\\n       apt-transport-https \\\n       ca-certificates \\\n       curl \\\n       gnupg-agent \\\n       software-properties-common\n   ```\n\n3. Add Dockerâ€™s official GPG key:\n\n   ```\n   $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n   ```\n\n   Verify that you now have the key with the fingerprint `9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88`, by searching for the last 8 characters of the fingerprint.\n\n   ```\n   $ sudo apt-key fingerprint 0EBFCD88\n\n   pub   rsa4096 2017-02-22 [SCEA]\n         9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88\n   uid           [ unknown] Docker Release (CE deb) <docker@docker.com>\n   sub   rsa4096 2017-02-22 [S]\n   ```\n\n4. Use the following command to set up the **stable** repository. To add the **nightly** or **test** repository, add the word `nightly` or `test` (or both) after the word `stable` in the commands below. [Learn about **nightly** and **test** channels](https://docs.docker.com/install/).\n\n   > **Note**: The `lsb_release -cs` sub-command below returns the name of your Ubuntu distribution, such as `xenial`. Sometimes, in a distribution like Linux Mint, you might need to change `$(lsb_release -cs)` to your parent Ubuntu distribution. For example, if you are using `Linux Mint Tessa`, you could use `bionic`. Docker does not offer any guarantees on untested and unsupported Ubuntu distributions.\n\n\n\n   - - x86_64 / amd64\n     - armhf\n     - arm64\n     - ppc64le (IBM Power)\n     - s390x (IBM Z)\n\n\n\n   ```\n   $ sudo add-apt-repository \\\n      \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n      $(lsb_release -cs) \\\n      stable\"\n   ```\n\n\n\n#### INSTALL DOCKER ENGINE - COMMUNITY\n\n1. Update the `apt` package index.\n\n   ```\n   $ sudo apt-get update\n   ```\n\n2. Install the *latest version* of Docker Engine - Community and containerd, or go to the next step to install a specific version:\n\n   ```\n   $ sudo apt-get install docker-ce docker-ce-cli containerd.io\n   ```\n\n   > **ï˜** Got multiple Docker repositories?\n   >\n   > If you have multiple Docker repositories enabled, installing or updating without specifying a version in the `apt-get install` or `apt-get update` command always installs the highest possible version, which may not be appropriate for your stability needs.\n\n3. To install a *specific version* of Docker Engine - Community, list the available versions in the repo, then select and install:\n\n   a. List the versions available in your repo:\n\n   ```\n   $ apt-cache madison docker-ce\n\n     docker-ce | 5:18.09.1~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages\n     docker-ce | 5:18.09.0~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages\n     docker-ce | 18.06.1~ce~3-0~ubuntu       | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages\n     docker-ce | 18.06.0~ce~3-0~ubuntu       | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages\n     ...\n   ```\n\n   b. Install a specific version using the version string from the second column, for example, `5:18.09.1~3-0~ubuntu-xenial`.\n\n   ```\n   $ sudo apt-get install docker-ce=<VERSION_STRING> docker-ce-cli=<VERSION_STRING> containerd.io\n   ```\n\n4. Verify that Docker Engine - Community is installed correctly by running the `hello-world` image.\n\n   ```shell\n   $ sudo docker run hello-world\n   ```","tags":["ubuntu","nvidia-docker"],"categories":["Linux","docker"]}]