[{"title":"kubernetesç»„ä»¶","url":"/2020/01/07/kubernetesç»„ä»¶/","content":"\n@[TOC]\n\n# kubernetesç»„ä»¶\n\n## Masterç»„ä»¶\n\n`master`ç»„ä»¶æä¾›é›†ç¾¤ç®¡ç†æ§åˆ¶ä¸­å¿ƒã€‚\n\n`master`ç»„ä»¶å¯ä»¥åœ¨é›†ç¾¤ä»»æ„èŠ‚ç‚¹è¿è¡Œã€‚ä½†æ˜¯ä¸ºäº†ç®€å•èµ·è§ï¼Œé€šå¸¸åœ¨ä¸€å°VM/æœºå™¨ä¸Šå¯åŠ¨æ‰€æœ‰Masterç»„ä»¶ï¼Œå¹¶ä¸”ä¸ä¼šåœ¨æ­¤VM/æœºå™¨ä¸Šè¿è¡Œç”¨æˆ·å®¹å™¨ã€‚è¯·å‚è€ƒ [æ„å»ºé«˜å¯ç”¨ç¾¤é›†](https://kubernetes.io/docs/admin/high-availability)ä»¥æ¥æ„å»ºmulti-master-VMã€‚\n\n### kube-apiserver\n\n[kube-apiserver](https://kubernetes.io/docs/admin/kube-apiserver)ç”¨äºæš´éœ²Kubernetes APIã€‚ä»»ä½•çš„èµ„æºè¯·æ±‚/è°ƒç”¨æ“ä½œéƒ½æ˜¯é€šè¿‡kube-apiserveræä¾›çš„æ¥å£è¿›è¡Œã€‚è¯·å‚é˜…[æ„å»ºé«˜å¯ç”¨ç¾¤é›†](https://kubernetes.io/docs/admin/high-availability)ã€‚\n\n### ETCD\n\n[etcd](https://kubernetes.io/docs/admin/etcd)æ˜¯Kubernetesæä¾›é»˜è®¤çš„å­˜å‚¨ç³»ç»Ÿï¼Œä¿å­˜æ‰€æœ‰é›†ç¾¤æ•°æ®ï¼Œä½¿ç”¨æ—¶éœ€è¦ä¸ºetcdæ•°æ®æä¾›å¤‡ä»½è®¡åˆ’ã€‚\n\n### kube-controller-manager\n\n[kube-controller-manager](https://kubernetes.io/docs/admin/kube-controller-manager)è¿è¡Œç®¡ç†æ§åˆ¶å™¨ï¼Œå®ƒä»¬æ˜¯é›†ç¾¤ä¸­å¤„ç†å¸¸è§„ä»»åŠ¡çš„åå°çº¿ç¨‹ã€‚é€»è¾‘ä¸Šï¼Œæ¯ä¸ªæ§åˆ¶å™¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ï¼Œä½†ä¸ºäº†é™ä½å¤æ‚æ€§ï¼Œå®ƒä»¬éƒ½è¢«ç¼–è¯‘æˆå•ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶åœ¨å•ä¸ªè¿›ç¨‹ä¸­è¿è¡Œã€‚\n\nè¿™äº›æ§åˆ¶å™¨åŒ…æ‹¬ï¼š\n\n- [èŠ‚ç‚¹ï¼ˆNodeï¼‰æ§åˆ¶å™¨](http://docs.kubernetes.org.cn/304.html)ã€‚\n- å‰¯æœ¬ï¼ˆReplicationï¼‰æ§åˆ¶å™¨ï¼šè´Ÿè´£ç»´æŠ¤ç³»ç»Ÿä¸­æ¯ä¸ªå‰¯æœ¬ä¸­çš„podã€‚\n- ç«¯ç‚¹ï¼ˆEndpointsï¼‰æ§åˆ¶å™¨ï¼šå¡«å……Endpointså¯¹è±¡ï¼ˆå³è¿æ¥Servicesï¼†Podsï¼‰ã€‚\n- [Service Account](http://docs.kubernetes.org.cn/84.html)å’ŒTokenæ§åˆ¶å™¨ï¼šä¸ºæ–°çš„[Namespace](http://docs.kubernetes.org.cn/242.html) åˆ›å»ºé»˜è®¤å¸æˆ·è®¿é—®API Tokenã€‚\n\n### cloud-controller-manager\n\näº‘æ§åˆ¶å™¨ç®¡ç†å™¨è´Ÿè´£ä¸åº•å±‚äº‘æä¾›å•†çš„å¹³å°äº¤äº’ã€‚äº‘æ§åˆ¶å™¨ç®¡ç†å™¨æ˜¯Kubernetesç‰ˆæœ¬1.6ä¸­å¼•å…¥çš„ï¼Œç›®å‰è¿˜æ˜¯Alphaçš„åŠŸèƒ½ã€‚\n\näº‘æ§åˆ¶å™¨ç®¡ç†å™¨ä»…è¿è¡Œäº‘æä¾›å•†ç‰¹å®šçš„ï¼ˆcontroller loopsï¼‰æ§åˆ¶å™¨å¾ªç¯ã€‚å¯ä»¥é€šè¿‡å°†`--cloud-provider` flagè®¾ç½®ä¸ºexternalå¯åŠ¨kube-controller-manager ï¼Œæ¥ç¦ç”¨æ§åˆ¶å™¨å¾ªç¯ã€‚\n\n`cloud-controller-manager` å…·ä½“åŠŸèƒ½ï¼š\n\n- èŠ‚ç‚¹ï¼ˆNodeï¼‰æ§åˆ¶å™¨\n- è·¯ç”±ï¼ˆRouteï¼‰æ§åˆ¶å™¨\n- Serviceæ§åˆ¶å™¨\n- å·ï¼ˆVolumeï¼‰æ§åˆ¶å™¨\n\n### kube-scheduler\n\n`kube-scheduler` ç›‘è§†æ–°åˆ›å»ºæ²¡æœ‰åˆ†é…åˆ°[Node](http://docs.kubernetes.org.cn/304.html)çš„[Pod](http://docs.kubernetes.org.cn/312.html)ï¼Œä¸ºPodé€‰æ‹©ä¸€ä¸ªNodeã€‚\n\n### æ’ä»¶addons\n\næ’ä»¶ï¼ˆaddonï¼‰æ˜¯å®ç°é›†ç¾¤podå’ŒServicesåŠŸèƒ½çš„ ã€‚Podç”±[Deployments](http://docs.kubernetes.org.cn/317.html)ï¼ŒReplicationControllerç­‰è¿›è¡Œç®¡ç†ã€‚Namespace æ’ä»¶å¯¹è±¡æ˜¯åœ¨kube-system Namespaceä¸­åˆ›å»ºã€‚\n\n#### DNS\n\nè™½ç„¶ä¸ä¸¥æ ¼è¦æ±‚ä½¿ç”¨æ’ä»¶ï¼Œä½†Kubernetesé›†ç¾¤éƒ½åº”è¯¥å…·æœ‰é›†ç¾¤ DNSã€‚\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tç¾¤é›† DNSæ˜¯ä¸€ä¸ªDNSæœåŠ¡å™¨ï¼Œèƒ½å¤Ÿä¸º Kubernetes servicesæä¾› DNSè®°å½•ã€‚ç”±Kuberneteså¯åŠ¨çš„å®¹å™¨è‡ªåŠ¨å°†è¿™ä¸ªDNSæœåŠ¡å™¨åŒ…å«åœ¨ä»–ä»¬çš„DNS searchesä¸­ã€‚\n\näº†è§£[æ›´å¤šè¯¦æƒ…](https://www.kubernetes.org.cn/542.html)\n\n#### ç”¨æˆ·ç•Œé¢\n\nkube-uiæä¾›é›†ç¾¤çŠ¶æ€åŸºç¡€ä¿¡æ¯æŸ¥çœ‹ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[ä½¿ç”¨HTTPä»£ç†è®¿é—®Kubernetes API](https://kubernetes.io/docs/tasks/access-kubernetes-api/http-proxy-access-api/)\n\n#### å®¹å™¨èµ„æºç›‘æµ‹\n\n[å®¹å™¨èµ„æºç›‘æ§](https://kubernetes.io/docs/user-guide/monitoring)æä¾›ä¸€ä¸ªUIæµè§ˆç›‘æ§æ•°æ®ã€‚\n\n#### cluster-level logging\n\n[Cluster-level logging](https://kubernetes.io/docs/user-guide/logging/overview)ï¼Œè´Ÿè´£ä¿å­˜å®¹å™¨æ—¥å¿—ï¼Œæœç´¢/æŸ¥çœ‹æ—¥å¿—ã€‚[Cluster-level logging](https://kubernetes.io/docs/user-guide/logging/overview)ï¼Œè´Ÿè´£ä¿å­˜å®¹å™¨æ—¥å¿—ï¼Œæœç´¢/æŸ¥çœ‹æ—¥å¿—ã€‚\n\n## Nodeç»„ä»¶\n\nèŠ‚ç‚¹ç»„ä»¶è¿è¡Œåœ¨[Node](http://docs.kubernetes.org.cn/304.html)ï¼Œæä¾›Kubernetesè¿è¡Œæ—¶ç¯å¢ƒï¼Œä»¥åŠç»´æŠ¤Podã€‚\n\n### kubelet\n\n[kubelet](https://kubernetes.io/docs/admin/kubelet)æ˜¯ä¸»è¦çš„èŠ‚ç‚¹ä»£ç†ï¼Œå®ƒä¼šç›‘è§†å·²åˆ†é…ç»™èŠ‚ç‚¹çš„podï¼Œå…·ä½“åŠŸèƒ½ï¼š\n\n- å®‰è£…Podæ‰€éœ€çš„volumeã€‚\n- ä¸‹è½½Podçš„Secretsã€‚\n- Podä¸­è¿è¡Œçš„ dockerï¼ˆæˆ–experimentallyï¼Œrktï¼‰å®¹å™¨ã€‚\n- å®šæœŸæ‰§è¡Œå®¹å™¨å¥åº·æ£€æŸ¥ã€‚\n- Reports the status of the pod back to the rest of the system, by creating a *mirror pod* if necessary.\n- Reports the status of the node back to the rest of the system.\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\n### kube-proxy\n\n[kube-proxy](https://kubernetes.io/docs/admin/kube-proxy)é€šè¿‡åœ¨ä¸»æœºä¸Šç»´æŠ¤ç½‘ç»œè§„åˆ™å¹¶æ‰§è¡Œè¿æ¥è½¬å‘æ¥å®ç°KubernetesæœåŠ¡æŠ½è±¡ã€‚\n\n### docker\n\ndockerç”¨äºè¿è¡Œå®¹å™¨ã€‚\n\n### RKT\n\nrktè¿è¡Œå®¹å™¨ï¼Œä½œä¸ºdockerå·¥å…·çš„æ›¿ä»£æ–¹æ¡ˆã€‚\n\n### supervisord\n\nsupervisordæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç›‘æ§ç³»ç»Ÿï¼Œç”¨äºä¿éšœkubeletå’Œdockerè¿è¡Œã€‚\n\n### fluentd\n\nfluentdæ˜¯ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œå¯æä¾›[cluster-level logging](https://kubernetes.io/docs/concepts/overview/components/#cluster-level-logging)ã€‚\n\n\n\n","tags":["kubernetes"],"categories":["Linux","k8s"]},{"title":"kubernetes","url":"/2020/01/07/kubernetes/","content":"\n@[TOC]\n\n# æ¦‚å¿µ\n\n## k8sæ˜¯ä»€ä¹ˆ\n\n`kubernetes` çš„åå­—æ¥è‡ªå¸Œè…Šè¯­ï¼Œæ„æ€æ˜¯â€œèˆµæ‰‹â€æˆ–è€…â€œé¢†èˆªå‘˜â€ã€‚k8sæ˜¯å°†`kubernetes` ä¸­é—´8ä¸ªå­—æ¯`ubernete`æ›¿æ¢ä¸º8çš„ç¼©å†™ã€‚\n\n`kubernetes` æ˜¯å®¹å™¨é›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„å¹³å°ï¼Œå¯ä»¥å®ç°å®¹å™¨é›†ç¾¤åŒ–çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ã€è‡ªåŠ¨æ‰©ç¼©å®¹ã€ç»´æŠ¤ç­‰åŠŸèƒ½ã€‚é€šè¿‡`kubernetes` ä½ å¯ä»¥å®ç°ï¼š\n\n1. å¿«é€Ÿéƒ¨ç½²åº”ç”¨\n2. å¿«é€Ÿæ‰©å±•åº”ç”¨\n3. æ— ç¼å¯¹æ¥æ–°çš„åº”ç”¨åŠŸèƒ½\n4. èŠ‚çœèµ„æºï¼Œä¼˜åŒ–ç¡¬ä»¶èµ„æºçš„ä½¿ç”¨\n\n## ç‰¹ç‚¹\n\n1. <font color=red>**å¯ç§»æ¤ï¼š**</font> æ”¯æŒå…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€æ··åˆäº‘ã€å¤šé‡äº‘ï¼ˆmulti-cloudï¼‰\n2. <font color=red>**å¯æ‰©å±•ï¼š**</font> æ¨¡å—åŒ–ã€æ’ä»¶åŒ–ã€å¯æŒ‚è½½ã€å¯ç»„åˆ\n3. <font color=red>**è‡ªåŠ¨åŒ–ï¼š**</font> è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œè‡ªåŠ¨é‡å¯ï¼Œè‡ªåŠ¨å¤åˆ¶ï¼Œè‡ªåŠ¨ä¼¸ç¼©ã€æ‰©å±•\n\n## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®¹å™¨\n\n\n\n![](https://raw.githubusercontent.com/wiki/AlexBruceLu/AlexBruceLu.github.io/k8s/why_containers.jpg)\n\nä¼ ç»Ÿçš„åº”ç”¨éƒ¨ç½²æ–¹å¼æ˜¯é€šè¿‡è„šæœ¬æˆ–è€…æ’ä»¶æ¥å®‰è£…åº”ç”¨ã€‚è¿™æ ·çš„ç¼ºç‚¹æ˜¯åº”ç”¨çš„è¿è¿è¡Œã€é…ç½®ã€ç®¡ç†ã€æ‰€æœ‰ç”Ÿå­˜å‘¨æœŸå°†ä¸å½“å‰æ“ä½œç³»ç»Ÿç»‘å®šï¼Œè¿™æ ·åšå¹¶ä¸åˆ©äºå‡çº§ã€å›æ»šç­‰æ“ä½œã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ›å»ºè™šæ‹Ÿæœºçš„æ–¹å¼æ¥å®ç°æŸäº›åŠŸèƒ½ï¼Œä½†æ˜¯è™šæ‹Ÿæœºæ˜¯éå¸¸é‡ï¼Œå¹¶ä¸å…·æœ‰å¯ç§»æ¤æ€§ã€‚\n\næ–°çš„æ–¹å¼æ˜¯é€šè¿‡éƒ¨ç½²å®¹å™¨çš„æ–¹å¼æ¥å®ç°ï¼Œæ¯ä¸ªå®¹å™¨ä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œæ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®¹å™¨ä¹‹é—´çš„è¿›ç¨‹äº’ä¸å½±å“ï¼Œèƒ½åŒºåˆ†è®¡ç®—èµ„æºã€‚ç›¸å¯¹è™šæ‹Ÿæœºï¼Œå®¹å™¨èƒ½å¤Ÿå¿«é€Ÿéƒ¨ç½²ã€‚ç”±äºå®¹å™¨ä¸åº•å±‚è®¾æ–½ã€æœºå™¨æ–‡ä»¶ä¹‹é—´æ˜¯è§£è€¦çš„ï¼Œæ‰€ä»¥èƒ½åœ¨ä¸åŒäº‘ã€ä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´è¿›è¡Œè¿ç§»ã€‚\n\nå®¹å™¨å ç”¨èµ„æºå°‘ï¼Œéƒ¨ç½²å¿«ã€‚æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥è¢«æ‰“åŒ…æˆä¸€ä¸ªé•œåƒã€‚ä½¿å¾—åº”ç”¨ä¸é•œåƒä¹‹é—´æ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œè¿™ä¹Ÿè®©å®¹å™¨æ›´åŠ å…·æœ‰ä¼˜åŠ¿ã€‚ä½¿ç”¨å®¹å™¨å¯ä»¥åœ¨`build`æˆ–è€…`release`çš„é˜¶æ®µï¼Œä¸ºåº”ç”¨åˆ›å»ºå®¹å™¨é•œåƒï¼Œå› ä¸ºæ¯ä¸ªåº”ç”¨ä¸éœ€è¦ä¸å…¶ä»–çš„åº”ç”¨å †æ ˆç»„åˆï¼Œä¹Ÿä¸ä¾èµ–äº ç”Ÿäº§ç¯å¢ƒåŸºç¡€ç»“æ„ï¼Œè¿™å°±èƒ½ä¿è¯å¼€å‘ã€æµ‹è¯•ç¯å¢ƒçš„ä¸€è‡´æ€§ã€‚åŒæ—¶å®¹å™¨æ¯”è™šæ‹Ÿæœºæ›´åŠ çš„â€é€æ˜â€œï¼Œæ–¹ä¾¿ç›‘æ§å’Œç®¡ç†ã€‚\n\n> **<font color=red>å®¹å™¨çš„ä¼˜åŠ¿æ€»ç»“ï¼š</font>**\n>\n> 1. **å¿«é€Ÿåˆ›å»ºã€éƒ¨ç½²åº”ç”¨ï¼š**ä¸è™šæ‹Ÿæœºç›¸æ¯”å®¹å™¨çš„åˆ›å»ºæ›´åŠ å®¹æ˜“\n> 2. **æŒç»­å¼€å‘ã€é›†æˆå’Œéƒ¨ç½²ï¼š**æä¾›å¯é ä¸”é¢‘ç¹çš„å®¹å™¨é•œåƒæ„å»ºã€éƒ¨ç½²ï¼Œå¹¶ä½¿ç”¨å¿«é€Ÿå’Œç®€å•çš„å›æ»šï¼ˆç”±äºé•œåƒçš„ä¸å¯å˜æ€§ï¼‰ã€‚\n> 3. **å¼€å‘å’Œè¿è¡Œç›¸åˆ†ç¦»ï¼š** åœ¨buildæˆ–è€…releaseé˜¶æ®µåˆ›å»ºå®¹å™¨é•œåƒï¼Œä½¿å¾—åº”ç”¨å’ŒåŸºç¡€è®¾æ–½è§£è€¦ã€‚\n> 4. **å¼€å‘æµ‹è¯•ç¯å¢ƒçš„ä¸€è‡´æ€§ï¼š**åœ¨æœ¬åœ°æˆ–è€…å¤–ç½‘è¿è¡Œä¸€è‡´æ€§\n> 5. **æ”¯æŒäº‘å¹³å°ã€æˆ–å…¶ä»–æ“ä½œç³»ç»Ÿï¼š**å¯ä»¥åœ¨`Ubuntu`ã€`RHEL`ã€` CoreOS`ã€`on-prem`ã€`Google Container Engine`æˆ–å…¶å®ƒä»»ä½•ç¯å¢ƒä¸­è¿è¡Œã€‚\n> 6. **Lossely coupledï¼Œåˆ†å¸ƒå¼ï¼Œå¼¹æ€§ï¼Œå¾®æœåŠ¡åŒ–ï¼š**åº”ç”¨ç¨‹åºåˆ†ä¸ºæ›´å°æ›´ç‹¬ç«‹çš„éƒ¨ä»¶ï¼Œå¯ä»¥åŠ¨æ€éƒ¨ç½²å’Œç®¡ç†ã€‚\n> 7. **èµ„æºéš”ç¦»ï¼š**æ¯ä¸ªå®¹å™¨ä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œéƒ½æœ‰ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿã€äº’ä¸å½±å“\n> 8. **èµ„æºåˆ©ç”¨ï¼š**æ›´é«˜æ•ˆ\n\n## èƒ½åšä»€ä¹ˆ\n\nå¯ä»¥åœ¨ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºçš„kubernetesé›†ç¾¤ä¸Šè¿è¡Œå®¹å™¨åŒ–åº”ç”¨ï¼Œkubernetesèƒ½æä¾›ä¸€ä¸ªâ€ä»¥å®¹å™¨ä¸ºä¸­å¿ƒçš„åŸºç¡€æ¶æ„â€œï¼Œæ»¡è¶³ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œåº”ç”¨çš„å¸¸è§éœ€æ±‚ï¼š\n\n> 1. å¤šä¸ªè¿›ç¨‹ï¼ˆä½œä¸ºå®¹å™¨è¿è¡Œï¼‰ååŒå·¥ä½œï¼ˆpodï¼‰\n> 2. å‚¨å­˜ç³»ç»ŸæŒ‚è½½\n> 3. Distributing secrets\n> 4. åº”ç”¨å¥åº·æ£€æµ‹\n> 5. åº”ç”¨å®ä¾‹çš„å¤åˆ¶\n> 6. podè‡ªåŠ¨ä¼¸ç¼©ã€æ‰©å±•\n> 7. Naming and discovering\n> 8. è´Ÿè½½å‡è¡¡\n> 9. æ»šåŠ¨æ›´æ–°\n> 10. èµ„æºç›‘æ§\n> 11. æ—¥å¿—è®¿é—®\n> 12. è°ƒè¯•åº”ç”¨ç¨‹åº\n> 13. æä¾›è®¤è¯å’Œæˆæƒ\n\n## ä¸æ˜¯ä»€ä¹ˆ\n\n1. Kuberneteså¹¶ä¸æ˜¯ä¼ ç»Ÿçš„PaaSï¼ˆå¹³å°å³æœåŠ¡ï¼‰ç³»ç»Ÿã€‚\n2. Kubernetesä¸é™åˆ¶æ”¯æŒåº”ç”¨çš„ç±»å‹ï¼Œä¸é™åˆ¶åº”ç”¨æ¡†æ¶ã€‚ä¸é™åˆ¶å—æ”¯æŒçš„è¯­è¨€runtimes (ä¾‹å¦‚, Java, Python, Ruby)ï¼Œæ»¡è¶³[12-factor applications](https://12factor.net/) ã€‚ä¸åŒºåˆ† â€œappsâ€ æˆ–è€…â€œservicesâ€ã€‚ Kubernetesæ”¯æŒä¸åŒè´Ÿè½½åº”ç”¨ï¼ŒåŒ…æ‹¬æœ‰çŠ¶æ€ã€æ— çŠ¶æ€ã€æ•°æ®å¤„ç†ç±»å‹çš„åº”ç”¨ã€‚åªè¦è¿™ä¸ªåº”ç”¨å¯ä»¥åœ¨å®¹å™¨é‡Œè¿è¡Œï¼Œé‚£ä¹ˆå°±èƒ½å¾ˆå¥½çš„è¿è¡Œåœ¨Kubernetesä¸Šã€‚\n3. Kubernetesä¸æä¾›ä¸­é—´ä»¶ï¼ˆå¦‚message busesï¼‰ã€æ•°æ®å¤„ç†æ¡†æ¶ï¼ˆå¦‚Sparkï¼‰ã€æ•°æ®åº“(å¦‚Mysql)æˆ–è€…é›†ç¾¤å­˜å‚¨ç³»ç»Ÿ(å¦‚Ceph)ä½œä¸ºå†…ç½®æœåŠ¡ã€‚ä½†è¿™äº›åº”ç”¨éƒ½å¯ä»¥è¿è¡Œåœ¨Kubernetesä¸Šé¢ã€‚\n4. Kubernetesä¸éƒ¨ç½²æºç ä¸ç¼–è¯‘åº”ç”¨ã€‚æŒç»­é›†æˆçš„ (CI)å·¥ä½œæµæ–¹é¢ï¼Œä¸åŒçš„ç”¨æˆ·æœ‰ä¸åŒçš„éœ€æ±‚å’Œåå¥½çš„åŒºåŸŸï¼Œå› æ­¤ï¼Œæä¾›åˆ†å±‚çš„ CIå·¥ä½œæµï¼Œä½†å¹¶ä¸å®šä¹‰å®ƒåº”è¯¥å¦‚ä½•å·¥ä½œã€‚\n5. Kuberneteså…è®¸ç”¨æˆ·é€‰æ‹©è‡ªå·±çš„æ—¥å¿—ã€ç›‘æ§å’ŒæŠ¥è­¦ç³»ç»Ÿã€‚\n6. Kubernetesä¸æä¾›æˆ–æˆæƒä¸€ä¸ªå…¨é¢çš„åº”ç”¨ç¨‹åºé…ç½® è¯­è¨€/ç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼Œ[jsonnet](https://github.com/google/jsonnet)ï¼‰ã€‚\n7. Kubernetesä¸æä¾›ä»»ä½•æœºå™¨é…ç½®ã€ç»´æŠ¤ã€ç®¡ç†æˆ–è€…è‡ªä¿®å¤ç³»ç»Ÿã€‚\n\n> å¦ä¸€æ–¹é¢ï¼Œå¤§é‡çš„Paasç³»ç»Ÿéƒ½å¯ä»¥è¿è¡Œåœ¨Kubernetesä¸Šï¼Œæ¯”å¦‚Openshiftã€Deisã€Gondorã€‚å¯ä»¥æ„å»ºè‡ªå·±çš„Paaså¹³å°ï¼Œä¸è‡ªå·±é€‰æ‹©çš„CIç³»ç»Ÿé›†æˆã€‚\n>\n> ç”±äºKubernetesè¿è¡Œåœ¨åº”ç”¨çº§åˆ«è€Œä¸æ˜¯ç¡¬ä»¶çº§ï¼Œå› æ­¤æä¾›äº†æ™®é€šçš„Paaså¹³å°æä¾›çš„ä¸€äº›é€šç”¨åŠŸèƒ½ï¼Œæ¯”å¦‚éƒ¨ç½²ï¼Œæ‰©å±•ï¼Œè´Ÿè½½å‡è¡¡ï¼Œæ—¥å¿—ï¼Œç›‘æ§ç­‰ã€‚è¿™äº›é»˜è®¤åŠŸèƒ½æ˜¯å¯é€‰çš„ã€‚\n>\n> å¦å¤–ï¼ŒKubernetesä¸ä»…ä»…æ˜¯ä¸€ä¸ªâ€œç¼–æ’ç³»ç»Ÿâ€ï¼›å®ƒæ¶ˆé™¤äº†ç¼–æ’çš„éœ€è¦ã€‚â€œç¼–æ’â€çš„å®šä¹‰æ˜¯æŒ‡æ‰§è¡Œä¸€ä¸ªé¢„å®šçš„å·¥ä½œæµï¼šå…ˆæ‰§è¡ŒAï¼Œä¹‹Bï¼Œç„¶Cã€‚ç›¸åï¼ŒKubernetesç”±ä¸€ç»„ç‹¬ç«‹çš„å¯ç»„åˆæ§åˆ¶è¿›ç¨‹ç»„æˆã€‚æ€ä¹ˆæ ·ä»Aåˆ°Cå¹¶ä¸é‡è¦ï¼Œè¾¾åˆ°ç›®çš„å°±å¥½ã€‚å½“ç„¶é›†ä¸­æ§åˆ¶ä¹Ÿæ˜¯å¿…ä¸å¯å°‘ï¼Œæ–¹æ³•æ›´åƒæ’èˆçš„è¿‡ç¨‹ã€‚è¿™ä½¿å¾—ç³»ç»Ÿæ›´åŠ æ˜“ç”¨ã€å¼ºå¤§ã€å¼¹æ€§å’Œå¯æ‰©å±•ã€‚","tags":["kubernetes"],"categories":["Linux","k8s"]},{"title":"cudaå¸¸è§é—®é¢˜è§£å†³åŠæ³•","url":"/2019/12/18/cudaå¸¸è§é—®é¢˜è§£å†³åŠæ³•/","content":"\n@[TOC]\n\n### 1. libnvinfer.so.5: cannot open shared object file: No such file or directory\n\n```bash\n# Add NVIDIA package repositories\n# Add HTTPS support for apt-key\nsudo apt-get install gnupg-curl\nwget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/cuda-repo-ubuntu1604_10.0.130-1_amd64.deb\nsudo dpkg -i cuda-repo-ubuntu1604_10.0.130-1_amd64.deb\nsudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/7fa2af80.pub\nsudo apt-get update\nwget http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.deb\nsudo apt install ./nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.deb\nsudo apt-get update\n\n# Install NVIDIA driver\n# Issue with driver install requires creating /usr/lib/nvidia\nsudo mkdir /usr/lib/nvidia\nsudo apt-get install --no-install-recommends nvidia-418\n# Reboot. Check that GPUs are visible using the command: nvidia-smi\n\n# Install development and runtime libraries (~4GB)\nsudo apt-get install --no-install-recommends \\\n    cuda-10-0 \\\n    libcudnn7=7.6.2.24-1+cuda10.0  \\\n    libcudnn7-dev=7.6.2.24-1+cuda10.0\n\n\n# Install TensorRT. Requires that libcudnn7 is installed above.\nsudo apt-get install -y --no-install-recommends libnvinfer5=5.1.5-1+cuda10.0 \\\n    libnvinfer-dev=5.1.5-1+cuda10.0\n```\n\nGPU support\n\n\n\n**Note:** GPU support is available for Ubuntu and Windows with CUDAÂ®-enabled cards.\n\nTensorFlow GPU support requires an assortment of drivers and libraries. To simplify installation and avoid library conflicts, we recommend using a [TensorFlow Docker image with GPU support](https://www.tensorflow.org/install/docker) (Linux only). This setup only requires the [NVIDIAÂ® GPU drivers](https://www.nvidia.com/drivers).\n\nThese install instructions are for the latest release of TensorFlow. See the [tested build configurations](https://www.tensorflow.org/install/source#linux) for CUDA and cuDNN versions to use with older TensorFlow releases.\n\nPip package\n\nSee the [pip install guide](https://www.tensorflow.org/install/pip) for available packages, systems requirements, and instructions. To `pip` install a TensorFlow package with GPU support, choose a stable or development package:\n\n```bash\npip install tensorflow-gpu  # stable\n\npip install tf-nightly      # preview\n```\n\n\n\nOlder versions of TensorFlow\n\nFor the 1.15 release, CPU and GPU support are included in a single package:\n\n```bsh\npip install --pre \"tensorflow==1.15.*\"\n```\n\n\n\nFor releases 1.14 and older, CPU and GPU packages are separate:\n\n```bsh\npip install tensorflow==1.14      \n# CPU\npip install tensorflow-gpu==1.14  \n# GPU\n```\n\n\n\nHardware requirements\n\nThe following GPU-enabled devices are supported:\n\n- NVIDIAÂ® GPU card with CUDAÂ® Compute Capability 3.5 or higher. See the list of [CUDA-enabled GPU cards](https://developer.nvidia.com/cuda-gpus).\n\nSoftware requirements\n\nThe following NVIDIAÂ® software must be installed on your system:\n\n- [NVIDIAÂ® GPU drivers](https://www.nvidia.com/drivers) â€”CUDA 10.0 requires 410.x or higher.\n- [CUDAÂ® Toolkit](https://developer.nvidia.com/cuda-toolkit-archive) â€”TensorFlow supports CUDA 10.0 (TensorFlow >= 1.13.0)\n- [CUPTI](http://docs.nvidia.com/cuda/cupti/) ships with the CUDA Toolkit.\n- [cuDNN SDK](https://developer.nvidia.com/cudnn) (>= 7.4.1)\n- *(Optional)* [TensorRT 5.0](https://docs.nvidia.com/deeplearning/sdk/tensorrt-install-guide/index.html) to improve latency and throughput for inference on some models.\n\nLinux setup\n\nThe `apt` instructions below are the easiest way to install the required NVIDIA software on Ubuntu. However, if [building TensorFlow from source](https://www.tensorflow.org/install/source), manually install the software requirements listed above, and consider using a `-devel` [TensorFlow Docker image](https://www.tensorflow.org/install/docker) as a base.\n\nInstall [CUPTI](http://docs.nvidia.com/cuda/cupti/) which ships with the CUDAÂ® Toolkit. Append its installation directory to the `$LD_LIBRARY_PATH` environmental variable:\n\n```\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/extras/CUPTI/lib64\n```\n\n\n\nFor a GPU with CUDA Compute Capability 3.0, or different versions of the NVIDIA libraries, see the [Linux build from source](https://www.tensorflow.org/install/source) guide.\n\nInstall CUDA with apt\n\nThis section shows how to install CUDA 10 (TensorFlow >= 1.13.0) and CUDA 9 for Ubuntu 16.04 and 18.04. These instructions may work for other Debian-based distros.\n\n**Caution:** [Secure Boot](https://wiki.ubuntu.com/UEFI/SecureBoot) complicates installation of the NVIDIA driver and is beyond the scope of these instructions.\n\nUbuntu 18.04 (CUDA 10)\n\n```bsh\n# Add NVIDIA package repositorieswget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/cuda-repo-ubuntu1804_10.0.130-1_amd64.debsudo dpkg -i cuda-repo-ubuntu1804_10.0.130-1_amd64.debsudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pubsudo apt-get updatewget http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64/nvidia-machine-learning-repo-ubuntu1804_1.0.0-1_amd64.debsudo apt install ./nvidia-machine-learning-repo-ubuntu1804_1.0.0-1_amd64.debsudo apt-get update# Install NVIDIA driversudo apt-get install --no-install-recommends nvidia-driver-418# Reboot. Check that GPUs are visible using the command: nvidia-smi# Install development and runtime libraries (~4GB)sudo apt-get install --no-install-recommends \\    cuda-10-0 \\    libcudnn7=7.6.2.24-1+cuda10.0  \\    libcudnn7-dev=7.6.2.24-1+cuda10.0# Install TensorRT. Requires that libcudnn7 is installed above.sudo apt-get install -y --no-install-recommends libnvinfer5=5.1.5-1+cuda10.0 \\    libnvinfer-dev=5.1.5-1+cuda10.0\n```\n\n\n\nUbuntu 16.04 (CUDA 10)\n\n```bsh\n# Add NVIDIA package repositories# Add HTTPS support for apt-keysudo apt-get install gnupg-curlwget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/cuda-repo-ubuntu1604_10.0.130-1_amd64.debsudo dpkg -i cuda-repo-ubuntu1604_10.0.130-1_amd64.debsudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/7fa2af80.pubsudo apt-get updatewget http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.debsudo apt install ./nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.debsudo apt-get update# Install NVIDIA driver# Issue with driver install requires creating /usr/lib/nvidiasudo mkdir /usr/lib/nvidiasudo apt-get install --no-install-recommends nvidia-418# Reboot. Check that GPUs are visible using the command: nvidia-smi# Install development and runtime libraries (~4GB)sudo apt-get install --no-install-recommends \\    cuda-10-0 \\    libcudnn7=7.6.2.24-1+cuda10.0  \\    libcudnn7-dev=7.6.2.24-1+cuda10.0# Install TensorRT. Requires that libcudnn7 is installed above.sudo apt-get install -y --no-install-recommends libnvinfer5=5.1.5-1+cuda10.0 \\    libnvinfer-dev=5.1.5-1+cuda10.0\n```\n\n\n\nUbuntu 16.04 (CUDA 9.0 for TensorFlow < 1.13.0)\n\n```bash\n# Add NVIDIA package repository\nsudo apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/7fa2af80.pub\n\nwget http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/cuda-repo-ubuntu1604_9.1.85-1_amd64.deb\n\nsudo apt install ./cuda-repo-ubuntu1604_9.1.85-1_amd64.deb\n\nwget http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.deb\n\nsudo apt install ./nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.deb\nsudo apt update\n\n# Install the NVIDIA driver\n# Issue with driver install requires creating /usr/lib/nvidiasudo \n\nmkdir /usr/lib/nvidia\nsudo apt-get install --no-install-recommends nvidia-410\n\n# Reboot. Check that GPUs are visible using the command: nvidia-smi\n# Install CUDA and tools. Include optional NCCL 2.x\n\nsudo apt install cuda9.0 cuda-cublas-9-0 cuda-cufft-9-0 cuda-curand-9-0 \\    \n\tcuda-cusolver-9-0 cuda-cusparse-9-0 libcudnn7=7.2.1.38-1+cuda9.0 \\    \n\tlibnccl2=2.2.13-1+cuda9.0 cuda-command-line-tools-9-0\n\n# Optional: Install the TensorRT runtime (must be after CUDA install)\n\nsudo apt updatesudo apt install libnvinfer4=4.1.2-1+cuda9.0\n```\n\n\n\nWindows setup\n\nSee the [hardware requirements](https://www.tensorflow.org/install/gpu#hardware_requirements) and [software requirements](https://www.tensorflow.org/install/gpu#software_requirements) listed above. Read the [CUDAÂ® install guide for Windows](https://docs.nvidia.com/cuda/cuda-installation-guide-microsoft-windows/).\n\nMake sure the installed NVIDIA software packages match the versions listed above. In particular, TensorFlow will not load without the `cuDNN64_7.dll` file. To use a different version, see the [Windows build from source](https://www.tensorflow.org/install/source_windows) guide.\n\nAdd the CUDA, CUPTI, and cuDNN installation directories to the `%PATH%` environmental variable. For example, if the CUDA Toolkit is installed to `C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0` and cuDNN to `C:\\tools\\cuda`, update your `%PATH%` to match:\n\n```\nSET PATH=C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\bin;%PATH% SET PATH=C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\extras\\CUPTI\\libx64;%PATH% SET PATH=C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\include;%PATH% SET PATH=C:\\tools\\cuda\\bin;%PATH%\n```","tags":["CUDA"],"categories":["Linux","NVIDIA"]},{"title":"golang Runtime","url":"/2019/12/13/golangRuntime/","content":"\n@[TOC]\n\n# Golang Runtime\n\n## ä»€ä¹ˆæ˜¯Golang Runtime\n\n> Golang Runtime æ˜¯goè¯­è¨€è¿è¡Œæ—¶æ‰€éœ€è¦çš„åŸºç¡€è®¾æ–½\n>\n> 1. åç¨‹è°ƒåº¦ã€å†…å­˜åˆ†é…ã€GC\n> 2. æ“ä½œç³»ç»Ÿå’ŒCPUç›¸å…³æ“ä½œçš„å°è£…ï¼ˆä¿¡å·å¤„ç†ã€ç³»ç»Ÿè°ƒç”¨ã€å¯„å­˜å™¨æ“ä½œã€åŸå­æ“ä½œç­‰ï¼‰ã€CGO\n> 3. pprofã€traceã€raceæ£€æµ‹çš„æ”¯æŒ\n> 4. mapã€channelã€stringç­‰å†…ç½®ç±»å‹åŠåå°„çš„å®ç°\n\n### ä¸å…¶ä»–è¯­è¨€çš„ä¸åŒ\n\n1. Goæ˜¯æ²¡æœ‰è™šæ‹Ÿæœºçš„æ¦‚å¿µçš„ï¼Œæ‰€ä»¥runtimeä¹Ÿè¢«ç›´æ¥ç¼–è¯‘æˆnative code\n\n2. go è¯­è¨€`Runtime` ä»£ç å’Œ`ç”¨æˆ·ä»£ç ` æ˜¯ç›´æ¥æ‰“åŒ…åœ¨ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸­\n\n3. `Runtime` ä»£ç å’Œ`ç”¨æˆ·ä»£ç `åœ¨æ‰§è¡Œçš„æ—¶å€™å¹¶æ²¡æœ‰æ˜æ˜¾çš„ç•Œé™ï¼Œå°±æ˜¯å‡½æ•°è°ƒç”¨å…³ç³»\n\n4. goå¯¹ç³»ç»Ÿè°ƒç”¨çš„å‡½æ•°è¿›è¡Œäº†å°è£…ï¼Œå¯ä¸ä¾èµ–äºglibc\n\n5. ä¸€äº›goçš„å…³é”®å­—è¢«ç¼–è¯‘å™¨ç¼–è¯‘æˆäº†runtimeåŒ…ä¸‹çš„å‡½æ•°\n\n   | å…³é”®å­—       | å‡½æ•°                 |\n   | ------------ | -------------------- |\n   | go           | newproc              |\n   | new          | newobject            |\n   | <-        -> | chansend1ï¼Œchanrecv1 |\n\n### åç¨‹ç»“æ„ä½“å’Œåˆ‡æ¢å‡½æ•°\n\n```go\ntype g struct {\n\tgoid   int64  // åç¨‹id\n\tstatus uint32 // åç¨‹çŠ¶æ€\n\tstack  struct {\n\t\tlo uintptr // è¯¥åç¨‹æ‹¥æœ‰çš„æ ˆä½ä½\n\t\thi uintptr // è¯¥åç¨‹æ‹¥æœ‰çš„æ ˆé«˜ä½\n\t}\n\tsched     gobuf   // åˆ‡æ¢æ—¶ä¿å­˜çš„ä¸Šä¸‹æ–‡ä¿¡æ¯\n\tstartfunc uintptr // ç¨‹åºåœ°å€\n}\ntype gobuf struct {\n\tsp uintptr // æ ˆæŒ‡é’ˆä½ç½®\n\tpc uintptr // è¿è¡Œåˆ°çš„ç¨‹åºä½ç½®\n}\n```\n\n","tags":["go"],"categories":["ç¼–ç¨‹è¯­è¨€","GO"]},{"title":"inié…ç½®åº“è¯„æ","url":"/2019/12/13/inié…ç½®åº“è¯„æ/"},{"title":"cudaå¤šç‰ˆæœ¬åˆ‡æ¢å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜","url":"/2019/12/11/cudaå¤šç‰ˆæœ¬åˆ‡æ¢å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜/","content":"\n@[TOC]\n\n## Q&A\n\n### 1. æ‰¾ä¸åˆ°libcuda.so.1\n\n> error while loading shared libraries: libcuda.so.1: cannot open shared object file: No such file or director\n\nsolutionï¼š\n\n```bash\nfind / -name libcuda.so.1 #å¯»æ‰¾è¯¥åŠ¨æ€åº“çš„ä½ç½®\n\n# Ubuntu ä¸‹ä¸€èˆ¬ä¼šåœ¨/usr/lib/x86_64-linux-gnu/libcuda.so.1\n\n# æ·»åŠ è·¯å¾„\nsudo echo '/usr/lib/x86_64-linux-gnu/libcuda.so.1' >> /etc/ld.so.conf.d/cuda.conf\nsudo ldconfig\n```\n\n### 2. ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„åˆ‡æ¢\n\n> â€‹\tfatal error: cuda.h: No such file or directory\n>\n> **<font color=red>å¯èƒ½æ˜¯è¦åˆ‡æ¢ç‰ˆæœ¬çš„ç¯å¢ƒå˜é‡æ²¡æœ‰æ·»åŠ ï¼Œæ‰€ä»¥é¦–å…ˆæ·»åŠ ç¯å¢ƒå˜é‡</font>**\n\nsolutionï¼š\n\n```bash\n#æ·»åŠ ç¯å¢ƒå˜é‡ \nexport PATH=/usr/local/cuda-8.0/bin:/usr/local/cuda-10.0/bin:/usr/local/cuda/bin:$PATH\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64/:/usr/local/cuda-8.0/lib64/:/usr/local/cuda-10.0/lib64/:$LD_LIBRARY_PATH\n\n#åœ¨åˆ‡æ¢cudaç‰ˆæœ¬æ—¶\nrm -rf /usr/local/cuda#åˆ é™¤ä¹‹å‰åˆ›å»ºçš„è½¯é“¾æ¥\nsudo ln -s /usr/local/cuda-8.0/ /usr/local/cuda/\nnvcc --version #æŸ¥çœ‹å½“å‰ cuda ç‰ˆæœ¬\n\nnvcc: NVIDIA (R) Cuda compiler driver\nCopyright (c) 2005-2016 NVIDIA Corporation\nBuilt on Mon_Jan_23_12:24:11_CST_2017\nCuda compilation tools, release 8.0, V8.0.62\n\n#cuda8.0 åˆ‡æ¢åˆ° cuda9.0 \nrm -rf /usr/local/cuda\nsudo ln -s /usr/local/cuda-9.0/ /usr/local/cuda/\nnvcc --version\n```\n\n\n\n","tags":["CUDA"],"categories":["Linux","NVIDIA"]},{"title":"ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»--æ³¨é‡æ—¶æ•ˆçš„å“²å­¦","url":"/2019/12/10/ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»01/","content":"\n@[TOC]\n\n","tags":["ç¼–ç¨‹"],"categories":["é˜…è¯»","ç¼–ç¨‹"]},{"title":"git commit è§„èŒƒ","url":"/2019/12/10/git_commitè§„èŒƒ/","content":"\n@[TOC]\n\n# Git commit message è§„èŒƒ\n\n\n\n![img](../img/16b.jepg)\n\n\n\n> gitæ˜¯ç°åœ¨å¸‚é¢ä¸Šæœ€æµè¡Œçš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œä¹¦å†™è‰¯å¥½çš„commit messageèƒ½å¤§å¤§æé«˜ä»£ç ç»´æŠ¤çš„æ•ˆç‡ã€‚ä½†æ˜¯åœ¨æ—¥å¸¸å¼€å‘ä¸­ç”±äºç¼ºå°‘å¯¹äºcommit messageçš„çº¦æŸï¼Œå¯¼è‡´å¡«å†™å†…å®¹éšæ„ã€è´¨é‡å‚å·®ä¸é½ï¼Œå¯è¯»æ€§ä½äº¦éš¾ä»¥ç»´æŠ¤ã€‚åœ¨é¡¹ç›®ä¸­å¼•å…¥commit messageè§„èŒƒå·²æ˜¯è¿«åœ¨çœ‰ç«ã€‚\n\n## ç”¨ä»€ä¹ˆè§„èŒƒï¼Ÿ\n\nç°åœ¨å¸‚é¢ä¸Šæ¯”è¾ƒæµè¡Œçš„æ–¹æ¡ˆæ˜¯`çº¦å®šå¼æäº¤è§„èŒƒ`ï¼ˆ`Conventional Commits`ï¼‰ï¼Œå®ƒå—åˆ°äº†`Angularæäº¤å‡†åˆ™`çš„å¯å‘ï¼Œå¹¶åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä»¥å…¶ä¸ºä¾æ®ã€‚`çº¦å®šå¼æäº¤è§„èŒƒ`æ˜¯ä¸€ç§åŸºäºæäº¤æ¶ˆæ¯çš„è½»é‡çº§çº¦å®šã€‚ å®ƒæä¾›äº†ä¸€ç»„ç”¨äºåˆ›å»ºæ¸…æ™°çš„æäº¤å†å²çš„ç®€å•è§„åˆ™ï¼›è¿™ä½¿å¾—ç¼–å†™åŸºäºè§„èŒƒçš„è‡ªåŠ¨åŒ–å·¥å…·å˜å¾—æ›´å®¹æ˜“ã€‚è¿™ä¸ªçº¦å®šä¸`SemVer`ç›¸å»åˆï¼Œåœ¨æäº¤ä¿¡æ¯ä¸­æè¿°æ–°ç‰¹æ€§ã€bug ä¿®å¤å’Œç ´åæ€§å˜æ›´ã€‚å®ƒçš„ message æ ¼å¼å¦‚ä¸‹:\n\n```\n<ç±»å‹>[å¯é€‰çš„ä½œç”¨åŸŸ]: <æè¿°>\n\n[å¯é€‰çš„æ­£æ–‡]\n\n[å¯é€‰çš„è„šæ³¨]\nå¤åˆ¶ä»£ç \n```\n\n## Quick Start\n\n### 1. å…¨å±€å®‰è£…commitizen & cz-conventional-changelog\n\n`commitizen`æ˜¯ä¸€ä¸ªæ’°å†™åˆæ ¼`commit message`çš„å·¥å…·ï¼Œç”¨äºä»£æ›¿`git commit` æŒ‡ä»¤ï¼Œè€Œ`cz-conventional-changelog`é€‚é…å™¨æä¾›[conventional-changelog](https://github.com/conventional-changelog/conventional-changelog)æ ‡å‡†ï¼ˆçº¦å®šå¼æäº¤æ ‡å‡†ï¼‰ã€‚åŸºäºä¸åŒéœ€æ±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒé€‚é…å™¨ã€‚\n\n```\nnpm install -g commitizen cz-conventional-changelog\necho '{ \"path\": \"cz-conventional-changelog\" }' > ~/.czrc\nå¤åˆ¶ä»£ç \n```\n\nå®‰è£…å®Œæ¯•åï¼Œå¯ç›´æ¥ä½¿ç”¨`git cz`æ¥å–ä»£`git commit`ã€‚\n\nå…¨å±€æ¨¡å¼ä¸‹ï¼Œéœ€è¦ `~/.czrc` é…ç½®æ–‡ä»¶, ä¸º`commitizen`æŒ‡å®š`Adapter`ã€‚\n\n### 2. é¡¹ç›®å†…å®‰è£…commitlint & husky\n\n`commitlint`è´Ÿè´£ç”¨äºå¯¹`commit message`è¿›è¡Œæ ¼å¼æ ¡éªŒï¼Œ`husky`è´Ÿè´£æä¾›æ›´æ˜“ç”¨çš„`git hook`ã€‚\n\n```\nUse npm\nnpm i -D husky @commitlint/config-conventional @commitlint/cli\nå¤åˆ¶ä»£ç \nUse yarn\nyarn add husky @commitlint/config-conventional @commitlint/cli -D\nå¤åˆ¶ä»£ç \n```\n\n`commitlint`åªèƒ½åšæ ¼å¼è§„èŒƒï¼Œæ— æ³•è§¦åŠå†…å®¹ã€‚å¯¹äºå†…å®¹è´¨é‡çš„æŠŠæ§åªèƒ½é æˆ‘ä»¬è‡ªå·±ã€‚\n\n### 3. æ·»åŠ ç›¸åº”é…ç½®\n\nåˆ›å»º`commitlint.config.js`\n\n```\n# In the same path as package.json\n\necho 'module.exports = {extends: [\"@commitlint/config-conventional\"]};' > ./commitlint.config.js\nå¤åˆ¶ä»£ç \n```\n\nå¼•å…¥`husky`\n\n```\n# package.json\n\n...,\n\"husky\": {\n    \"hooks\": {\n      \"commit-msg\": \"commitlint -e $GIT_PARAMS\"\n    }\n}\nå¤åˆ¶ä»£ç \n```\n\n### 4. ä½¿ç”¨\n\næ‰§è¡Œ`git cz`è¿›å…¥interactiveæ¨¡å¼ï¼Œæ ¹æ®æç¤ºä¾æ¬¡å¡«å†™\n\n```\n1.Select the type of change that you're committing é€‰æ‹©æ”¹åŠ¨ç±»å‹ (<type>)\n\n2.What is the scope of this change (e.g. component or file name)? å¡«å†™æ”¹åŠ¨èŒƒå›´ (<scope>)\n\n3.Write a short, imperative tense description of the change: å†™ä¸€ä¸ªç²¾ç®€çš„æè¿° (<subject>)\n\n4.Provide a longer description of the change: (press enter to skip) å¯¹äºæ”¹åŠ¨å†™ä¸€æ®µé•¿æè¿° (<body>)\n\n5.Are there any breaking changes? (y/n) æ˜¯ç ´åæ€§ä¿®æ”¹å—ï¼Ÿé»˜è®¤n (<footer>)\n\n6.Does this change affect any openreve issues? (y/n) æ”¹åŠ¨ä¿®å¤äº†å“ªä¸ªé—®é¢˜ï¼Ÿé»˜è®¤n (<footer>)\nå¤åˆ¶ä»£ç \n```\n\nç”Ÿæˆçš„commit messageæ ¼å¼å¦‚ä¸‹ï¼š\n\n```\n<type>(<scope>): <subject>\n<BLANK LINE>\n<body>\n<BLANK LINE>\n<footer>\nå¤åˆ¶ä»£ç \n```\n\nå¡«å†™å®Œæ¯•åï¼Œ`husky`ä¼šè°ƒç”¨`commitlint`å¯¹messageè¿›è¡Œæ ¼å¼æ ¡éªŒï¼Œé»˜è®¤è§„å®š`type`åŠ`subject`ä¸ºå¿…å¡«é¡¹ã€‚\n\nä»»ä½•`git commit`æŒ‡ä»¤çš„`option`éƒ½èƒ½ç”¨åœ¨ `git cz`æŒ‡ä»¤ä¸Š, ä¾‹å¦‚`git cz -a`\n\n## Commit messageè§„èŒƒåœ¨rrd-feè½åœ°ä½¿ç”¨æƒ…å†µ\n\né’ˆå¯¹å›¢é˜Ÿç›®å‰ä½¿ç”¨çš„æƒ…å†µï¼Œæˆ‘ä»¬è®¨è®ºåæ‹Ÿå®šäº†`commit message`æ¯ä¸€éƒ¨åˆ†çš„å¡«å†™è§„åˆ™ã€‚\n\n### 1. type\n\n`type`ä¸ºå¿…å¡«é¡¹ï¼Œç”¨äºæŒ‡å®šcommitçš„ç±»å‹ï¼Œçº¦å®šäº†`feat`ã€`fix`ä¸¤ä¸ª`ä¸»è¦type`ï¼Œä»¥åŠdocsã€styleã€buildã€refactorã€revertäº”ä¸ª`ç‰¹æ®Štype`ï¼Œ`å…¶ä½™type`æš‚ä¸ä½¿ç”¨ã€‚\n\n```\n# ä¸»è¦type\nfeat:     å¢åŠ æ–°åŠŸèƒ½\nfix:      ä¿®å¤bug\n\n# ç‰¹æ®Štype\ndocs:     åªæ”¹åŠ¨äº†æ–‡æ¡£ç›¸å…³çš„å†…å®¹\nstyle:    ä¸å½±å“ä»£ç å«ä¹‰çš„æ”¹åŠ¨ï¼Œä¾‹å¦‚å»æ‰ç©ºæ ¼ã€æ”¹å˜ç¼©è¿›ã€å¢åˆ åˆ†å·\nbuild:    æ„é€ å·¥å…·çš„æˆ–è€…å¤–éƒ¨ä¾èµ–çš„æ”¹åŠ¨ï¼Œä¾‹å¦‚webpackï¼Œnpm\nrefactor: ä»£ç é‡æ„æ—¶ä½¿ç”¨\nrevert:   æ‰§è¡Œgit revertæ‰“å°çš„message\n\n# æš‚ä¸ä½¿ç”¨type\ntest:     æ·»åŠ æµ‹è¯•æˆ–è€…ä¿®æ”¹ç°æœ‰æµ‹è¯•\nperf:     æé«˜æ€§èƒ½çš„æ”¹åŠ¨\nci:       ä¸CIï¼ˆæŒç»­é›†æˆæœåŠ¡ï¼‰æœ‰å…³çš„æ”¹åŠ¨\nchore:    ä¸ä¿®æ”¹srcæˆ–è€…testçš„å…¶ä½™ä¿®æ”¹ï¼Œä¾‹å¦‚æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨\nå¤åˆ¶ä»£ç \n```\n\nå½“ä¸€æ¬¡æ”¹åŠ¨åŒ…æ‹¬`ä¸»è¦type`ä¸`ç‰¹æ®Štype`æ—¶ï¼Œç»Ÿä¸€é‡‡ç”¨`ä¸»è¦type`ã€‚\n\n### 2. scope\n\n`scope`ä¹Ÿä¸ºå¿…å¡«é¡¹ï¼Œç”¨äºæè¿°æ”¹åŠ¨çš„èŒƒå›´ï¼Œæ ¼å¼ä¸ºé¡¹ç›®å/æ¨¡å—åï¼Œä¾‹å¦‚ï¼š `node-pc/common` `rrd-h5/activity`ï¼Œè€Œ`we-sdk`ä¸éœ€æŒ‡å®šæ¨¡å—åã€‚å¦‚æœä¸€æ¬¡commitä¿®æ”¹å¤šä¸ªæ¨¡å—ï¼Œå»ºè®®æ‹†åˆ†æˆå¤šæ¬¡commitï¼Œä»¥ä¾¿æ›´å¥½è¿½è¸ªå’Œç»´æŠ¤ã€‚\n\n### 3. body\n\n`body`å¡«å†™è¯¦ç»†æè¿°ï¼Œä¸»è¦æè¿°`æ”¹åŠ¨ä¹‹å‰çš„æƒ…å†µ`åŠ`ä¿®æ”¹åŠ¨æœº`ï¼Œå¯¹äºå°çš„ä¿®æ”¹ä¸ä½œè¦æ±‚ï¼Œä½†æ˜¯é‡å¤§éœ€æ±‚ã€æ›´æ–°ç­‰å¿…é¡»æ·»åŠ bodyæ¥ä½œè¯´æ˜ã€‚\n\n### 4. break changes\n\n`break changes`æŒ‡æ˜æ˜¯å¦äº§ç”Ÿäº†ç ´åæ€§ä¿®æ”¹ï¼Œæ¶‰åŠbreak changesçš„æ”¹åŠ¨å¿…é¡»æŒ‡æ˜è¯¥é¡¹ï¼Œç±»ä¼¼ç‰ˆæœ¬å‡çº§ã€æ¥å£å‚æ•°å‡å°‘ã€æ¥å£åˆ é™¤ã€è¿ç§»ç­‰ã€‚\n\n### 5. affect issues\n\n`affect issues`æŒ‡æ˜æ˜¯å¦å½±å“äº†æŸä¸ªé—®é¢˜ã€‚ä¾‹å¦‚æˆ‘ä»¬ä½¿ç”¨jiraæ—¶ï¼Œæˆ‘ä»¬åœ¨`commit message`ä¸­å¯ä»¥å¡«å†™å…¶å½±å“çš„`JIRA_ID`ï¼Œè‹¥è¦å¼€å¯è¯¥åŠŸèƒ½éœ€è¦å…ˆæ‰“é€š`jira`ä¸`gitlab`ã€‚å‚è€ƒæ–‡æ¡£ï¼š[docs.gitlab.com/ee/user/proâ€¦](https://docs.gitlab.com/ee/user/project/integrations/jira.html)\n\nå¡«å†™æ–¹å¼ä¾‹å¦‚ï¼š\n\n```\nre #JIRA_ID\nfix #JIRA_ID\nå¤åˆ¶ä»£ç \n```\n\n## ç¤ºä¾‹\n\n- å®Œæ•´çš„commit messageç¤ºä¾‹\n\n  ![img](../img/16b7.jepg)\n\n- ç›¸åº”çš„git log\n\n  ![img](../img/16b73.jepg)\n\n## æ‰©å±•é˜…è¯»\n\n[conventional commits](https://www.conventionalcommits.org/zh/v1.0.0-beta.3/) `å¿…è¯»` ä»‹ç»çº¦å®šå¼æäº¤æ ‡å‡†ã€‚\n\n[Angularè§„èŒƒ](https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines) `å¿…è¯»` ä»‹ç»Angularæ ‡å‡†æ¯ä¸ªéƒ¨åˆ†è¯¥å†™ä»€ä¹ˆã€è¯¥æ€ä¹ˆå†™ã€‚\n\n[@commitlint/config-conventional](https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional#type-enum) `å¿…è¯»` ä»‹ç»commitlintçš„æ ¡éªŒè§„åˆ™config-conventionalï¼Œä»¥åŠä¸€äº›å¸¸è§passes/failsæƒ…å†µã€‚","tags":["git"],"categories":["å·¥å…·","git"]},{"title":"æ¯’ä¸¸è®¡åˆ’ï¼šé˜²æ­¢æ¶æ„æ”¶è´­","url":"/2019/12/10/æ¯’ä¸¸è®¡åˆ’/","content":"\n@[TOC]\n\n","tags":["é‡‘è"],"categories":["é˜…è¯»","é‡‘è"]},{"title":"æ æ†æ”¶è´­ï¼šåå°”è¡—é»„é‡‘æ¸¸æˆ","url":"/2019/12/10/æ æ†æ”¶è´­/","content":"\n@[TOC]\n\n","tags":["é‡‘è"],"categories":["é˜…è¯»","é‡‘è"]},{"title":"Ubuntu 16.04 å®‰è£… CUDA","url":"/2019/12/09/Ubuntu_16.04å®‰è£…cudaä¸åŒç‰ˆæœ¬/","content":"\n@[TOC]\n\n## **ä¸€ã€æ“ä½œç³»ç»Ÿ:**\n\nç ”å‘å·¥ç¨‹å¸ˆé»˜è®¤éƒ½æ˜¯å°å¼æœºï¼Œå®‰è£…ubuntu16.04æ“ä½œç³»ç»Ÿï¼Œé»˜è®¤æˆ‘ä»¬å®‰è£…å¥½cudaå’Œæ˜¾å¡é©±åŠ¨ç›¸å…³è½¯ä»¶ã€‚å¦‚æœéœ€è¦é‡è£…ç³»ç»Ÿè¯·è”ç³»å„å±åœ°ITï¼Œç›®å‰é‡‡ç”¨USBè‡ªåŠ¨å®‰è£…çš„æ–¹å¼ï¼Œ10åˆ†é’Ÿå†…å¯ä»¥å®‰è£…å®Œæˆ\n\n## **äºŒã€å¸è½½åŸæœ‰çš„é©±åŠ¨å’Œcuda:**\n\nsudo su root\n\nservice lightdm stop\n\nnvidia-uninstall\n\napt-get install autoremove --purge nvidia*\n\n/usr/local/cuda-8.0/bin/uninstall_cuda-8.0.pl(æ ¹æ®ç‰ˆæœ¬å·æœ‰å·®åˆ«ï¼Œæ­¤å¤„ä»¥8.0ä¸ºä¾‹å­)\n\nrm -rf /usr/local/cuda-8.0(!!!æ‰§è¡Œè¿™ä¸€æ­¥æ—¶åˆ‡å‹¿è¯¯æ“ä½œï¼Œå¦åˆ™å®¹æ˜“å¯¼è‡´ç³»ç»Ÿå´©æºƒ)\n\n## **ä¸‰ã€cudaå®‰è£…ï¼šåŒ…å«æ˜¾å¡é©±åŠ¨å’Œç›¸å…³è½¯ä»¶åŒ…**\n\n### 1.ä¸‹è½½cudaè½¯ä»¶\n\n**ï¼ˆ8.0ç‰ˆæœ¬ï¼‰** wget https://developer.nvidia.com/compute/cuda/8.0/Prod2/local_installers/cuda_8.0.61_375.26_linux-run\n\n**ï¼ˆ9.0ç‰ˆæœ¬ï¼‰** wget https://developer.nvidia.com/compute/cuda/9.0/Prod/local_installers/cuda_9.0.176_384.81_linux-run\n\n**ï¼ˆ10.0ç‰ˆæœ¬ï¼‰**wget https://developer.nvidia.com/compute/cuda/10.0/Prod/local_installers/cuda_10.0.130_410.48_linux\n\n**ï¼ˆ10.1ç‰ˆæœ¬ï¼‰** \n\nâ€‹\t\twget http://developer.download.nvidia.com/compute/cuda/10.1/Prod/local_installers/cuda_10.1.243_418.87.00_linux.run\n\n**ï¼ˆ10.2ç‰ˆæœ¬ï¼‰**\n\nâ€‹\t\t wget http://developer.download.nvidia.com/compute/cuda/10.2/Prod/local_installers/cuda_10.2.89_440.33.01_linux.run\n\n### 2.ä¸‹è½½NVIDIAæ˜¾å¡é©±åŠ¨\n\nwget http://cn.download.nvidia.com/XFree86/Linux-x86_64/440.36/NVIDIA-Linux-x86_64-440.36.run\n\n### 3.æ·»åŠ å®‰è£…ç¨‹åºçš„å¯æ‰§è¡Œæƒé™ï¼š\n\nchmod +x *.run\n\n### 4.ç¦ç”¨é»˜è®¤çš„nouveauå¼€æºæ˜¾å¡é©±åŠ¨ï¼š\n\necho \"blacklist nouveau\" >> /etc/modprobe.d/blacklist-nouveau.conf\n\nä¹‹åå»ºè®®é‡å¯ä¸‹ç³»ç»Ÿ\n\n### 5.å…³é—­ç³»ç»Ÿå›¾å½¢ç•Œé¢ï¼Œæ˜¾å¡é©±åŠ¨å®‰è£…è¿‡ç¨‹éœ€è¦åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹è¿›è¡Œï¼ˆCtrl + Alt + F2 è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼‰\n\n```\nsudo su root\n\nservice lightdm stop\n```\n\n### 6.å®‰è£…æ˜¾å¡é©±åŠ¨ç¨‹åºï¼Œå‘½ä»¤ï¼š\n\n```\n./NVIDIA-Linux-x86_64-410.78.run -a -s -Z --no-opengl-files\n```\n\n### 7.å®‰è£…CUDA-9.0 é©±åŠ¨ï¼ˆè¯·æŠŠcudaå®‰è£…ç¨‹åºå’Œå®‰è£…ç›®æ ‡ç›®å½•æ›¿æ¢ä¸ºè‡ªå·±éœ€è¦å®‰è£…çš„å¯¹åº”ç‰ˆæœ¬ï¼‰\n\n```\n./cuda_9.0.176_384.81_linux.run --no-opengl-libs --toolkit --samples --samplespath=/usr/local/cuda-9.0 -silent\n```\n\n### 8.æ·»åŠ å®‰è£…çš„ç¯å¢ƒå˜é‡ï¼ˆå°†çº¢è‰²éƒ¨åˆ†æ›¿æ¢ä¸ºè‡ªå·±å®‰è£…çš„å¯¹åº”ç‰ˆæœ¬ï¼‰:\n\n```\necho 'export LD_LIBRARY_PATH=/usr/local/cuda/lib:/usr/local/cuda/lib64/:/usr/local/cuda-9.0/lib:/usr/local/cuda-9.0/lib64/:$LD_LIBRARY_PATH' >> /etc/profile\necho 'export PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/cuda-9.0/bin:/usr/local/cuda/bin:$PATH' >> /etc/profile\necho '/usr/local/cuda/lib64' >> /etc/ld.so.conf.d/cuda.conf\n\nldconfig\n```\n\n### 9.ä¸‹è½½cudnn\n\n- **Download cuDNN v7.6.5 (November 18th, 2019), for CUDA 10.2**\n\n  ```bash\n   wget https://developer.nvidia.com/compute/machine-learning/cudnn/secure/7.6.5.32/Production/10.2_20191118/cudnn-10.2-linux-x64-v7.6.5.32.tgz\n  ```\n\n- **Download cuDNN v7.6.5 (November 5th, 2019), for CUDA 10.1**\n\n  ```\n  wget https://developer.nvidia.com/compute/machine-learning/cudnn/secure/7.6.5.32/Production/10.1_20191031/cudnn-10.1-linux-x64-v7.6.5.32.tgz\n  ```\n\n- **Download cuDNN v7.6.4 (September 27, 2019), for CUDA 10.0**\n\n  ```\n  wget https://developer.nvidia.com/compute/machine-learning/cudnn/secure/7.6.4.38/Production/10.0_20190923/cudnn-10.0-linux-x64-v7.6.4.38.tgz\n  ```\n\n- **Download cuDNN v7.6.3 (August 23, 2019), for CUDA 9.0**\n\n  ```\n  wget https://developer.nvidia.com/compute/machine-learning/cudnn/secure/7.6.3.30/Production/9.0_20190822/cudnn-9.0-linux-x64-v7.6.3.30.tgz\n  ```\n\n- **Download cuDNN v7.1.3 (April 17, 2018), for CUDA 8.0**\n\n  ```\n  wget https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v7.1.3/prod/8.0_20180414/cudnn-8.0-linux-x64-v7.1\n  ```\n\n### 10.å®‰è£…cudnn\n\n```\ntar xf cudnn-9.0-linux-x64-v7.tar\nmv cuda/lib64/libcudnn* /usr/local/cuda-9.0/lib64/\nmv cuda/include/cudnn.h /usr/local/cuda-9.0/include/\n```","tags":["ubuntu","CUDA"],"categories":["Linux","NVIDIA"]},{"title":"go mod åŸºç¡€ç¯‡","url":"/2019/12/09/go_modåŸºç¡€ç¯‡/","content":"\n@[TOC]\n\n## å‡†å¤‡\n\n### å¼€å¯go mod\n\n1. æŠŠ golang å‡çº§åˆ° 1.11ï¼ˆç°åœ¨1.13 å·²ç»å‘å¸ƒäº†ï¼Œå»ºè®®ä½¿ç”¨1.13ï¼‰\n2. è®¾ç½® `GO111MODULE`\n\nGO111MODULE\n\n`GO111MODULE` æœ‰ä¸‰ä¸ªå€¼ï¼š`off`, `on`å’Œ`autoï¼ˆé»˜è®¤å€¼ï¼‰`ã€‚\n\n- `GO111MODULE=off`ï¼Œgoå‘½ä»¤è¡Œå°†ä¸ä¼šæ”¯æŒmoduleåŠŸèƒ½ï¼Œå¯»æ‰¾ä¾èµ–åŒ…çš„æ–¹å¼å°†ä¼šæ²¿ç”¨æ—§ç‰ˆæœ¬é‚£ç§é€šè¿‡vendorç›®å½•æˆ–è€…GOPATHæ¨¡å¼æ¥æŸ¥æ‰¾ã€‚\n- `GO111MODULE=on`ï¼Œgoå‘½ä»¤è¡Œä¼šä½¿ç”¨modulesï¼Œè€Œä¸€ç‚¹ä¹Ÿä¸ä¼šå»GOPATHç›®å½•ä¸‹æŸ¥æ‰¾ã€‚\n- `GO111MODULE=auto`ï¼Œé»˜è®¤å€¼ï¼Œgoå‘½ä»¤è¡Œå°†ä¼šæ ¹æ®å½“å‰ç›®å½•æ¥å†³å®šæ˜¯å¦å¯ç”¨moduleåŠŸèƒ½ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å½¢ï¼š\n  - å½“å‰ç›®å½•åœ¨GOPATH/srcä¹‹å¤–ä¸”è¯¥ç›®å½•åŒ…å«go.modæ–‡ä»¶\n  - å½“å‰æ–‡ä»¶åœ¨åŒ…å«go.modæ–‡ä»¶çš„ç›®å½•ä¸‹é¢ã€‚\n\n> å½“modules åŠŸèƒ½å¯ç”¨æ—¶ï¼Œä¾èµ–åŒ…çš„å­˜æ”¾ä½ç½®å˜æ›´ä¸º`$GOPATH/pkg`ï¼Œå…è®¸åŒä¸€ä¸ªpackageå¤šä¸ªç‰ˆæœ¬å¹¶å­˜ï¼Œä¸”å¤šä¸ªé¡¹ç›®å¯ä»¥å…±äº«ç¼“å­˜çš„ moduleã€‚\n\n```bash\nexport GO111MODULE=on\n```\n\n### go modå¸¸ç”¨å‘½ä»¤\n\ngolang æä¾›äº† `go mod`å‘½ä»¤æ¥ç®¡ç†åŒ…ã€‚\n\ngo mod æœ‰ä»¥ä¸‹å‘½ä»¤ï¼š\n\n| å‘½ä»¤     | è¯´æ˜                                                         |\n| -------- | ------------------------------------------------------------ |\n| download | download modules to local cache(ä¸‹è½½ä¾èµ–åŒ…)                  |\n| edit     | edit go.mod from tools or scriptsï¼ˆç¼–è¾‘go.mod                |\n| graph    | print module requirement graph (æ‰“å°æ¨¡å—ä¾èµ–å›¾)              |\n| init     | initialize new module in current directoryï¼ˆåœ¨å½“å‰ç›®å½•åˆå§‹åŒ–modï¼‰ |\n| tidy     | add missing and remove unused modules(æ‹‰å–ç¼ºå°‘çš„æ¨¡å—ï¼Œç§»é™¤ä¸ç”¨çš„æ¨¡å—) |\n| vendor   | make vendored copy of dependencies(å°†ä¾èµ–å¤åˆ¶åˆ°vendorä¸‹)     |\n| verify   | verify dependencies have expected content (éªŒè¯ä¾èµ–æ˜¯å¦æ­£ç¡®ï¼‰ |\n| why      | explain why packages or modules are needed(è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–) |\n\n## åœ¨é¡¹ç›®ä¸­ä½¿ç”¨\n\n### ç¤ºä¾‹ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®\n\n1. åœ¨`GOPATH ç›®å½•ä¹‹å¤–`æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå¹¶ä½¿ç”¨`go mod init` åˆå§‹åŒ–ç”Ÿæˆ`go.mod` æ–‡ä»¶\n\n```\nâœ  ~ mkdir hello\nâœ  ~ cd hello\nâœ  hello go mod init hello\ngo: creating new go.mod: module hello\nâœ  hello ls\ngo.mod\nâœ  hello cat go.mod\nmodule hello\n\ngo 1.12\n```\n\n> go.modæ–‡ä»¶ä¸€æ—¦åˆ›å»ºåï¼Œå®ƒçš„å†…å®¹å°†ä¼šè¢«go toolchainå…¨é¢æŒæ§ã€‚go toolchainä¼šåœ¨å„ç±»å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œæ¯”å¦‚go getã€go buildã€go modç­‰ä¿®æ”¹å’Œç»´æŠ¤go.modæ–‡ä»¶ã€‚\n\ngo.mod æä¾›äº†`module`, `require`ã€`replace`å’Œ`exclude` å››ä¸ªå‘½ä»¤\n\n- `module` è¯­å¥æŒ‡å®šåŒ…çš„åå­—ï¼ˆè·¯å¾„ï¼‰\n- `require` è¯­å¥æŒ‡å®šçš„ä¾èµ–é¡¹æ¨¡å—\n- `replace` è¯­å¥å¯ä»¥æ›¿æ¢ä¾èµ–é¡¹æ¨¡å—\n- `exclude` è¯­å¥å¯ä»¥å¿½ç•¥ä¾èµ–é¡¹æ¨¡å—\n\n1. æ·»åŠ ä¾èµ–\n\næ–°å»ºä¸€ä¸ª server.go æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š\n\n```\npackage main\n\nimport (\n    \"net/http\"\n    \n    \"github.com/labstack/echo\"\n)\n\nfunc main() {\n    e := echo.New()\n    e.GET(\"/\", func(c echo.Context) error {\n        return c.String(http.StatusOK, \"Hello, World!\")\n    })\n    e.Logger.Fatal(e.Start(\":1323\"))\n}\n```\n\næ‰§è¡Œ `go run server.go` è¿è¡Œä»£ç ä¼šå‘ç° go mod ä¼šè‡ªåŠ¨æŸ¥æ‰¾ä¾èµ–è‡ªåŠ¨ä¸‹è½½ï¼š\n\n```\n$ go run server.go\ngo: finding github.com/labstack/echo v3.3.10+incompatible\ngo: downloading github.com/labstack/echo v3.3.10+incompatible\ngo: extracting github.com/labstack/echo v3.3.10+incompatible\ngo: finding github.com/labstack/gommon/color latest\ngo: finding github.com/labstack/gommon/log latest\ngo: finding github.com/labstack/gommon v0.2.8\n# æ­¤å¤„çœç•¥å¾ˆå¤šè¡Œ\n...\n\n   ____    __\n  / __/___/ /  ___\n / _// __/ _ \\/ _ \\\n/___/\\__/_//_/\\___/ v3.3.10-dev\nHigh performance, minimalist Go web framework\nhttps://echo.labstack.com\n____________________________________O/_______\n                                    O\\\nâ‡¨ http server started on [::]:1323\n```\n\nç°åœ¨æŸ¥çœ‹go.mod å†…å®¹ï¼š\n\n```\n$ cat go.mod\n\nmodule hello\n\ngo 1.12\n\nrequire (\n    github.com/labstack/echo v3.3.10+incompatible // indirect\n    github.com/labstack/gommon v0.2.8 // indirect\n    github.com/mattn/go-colorable v0.1.1 // indirect\n    github.com/mattn/go-isatty v0.0.7 // indirect\n    github.com/valyala/fasttemplate v1.0.0 // indirect\n    golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a // indirect\n)\n```\n\ngo module å®‰è£… package çš„åŸå‰‡æ˜¯å…ˆæ‹‰æœ€æ–°çš„ release tagï¼Œè‹¥æ— tagåˆ™æ‹‰æœ€æ–°çš„commitï¼Œè¯¦è§ [Moduleså®˜æ–¹ä»‹ç»](https://github.com/golang/go/wiki/Modules)ã€‚ go ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª go.sum æ–‡ä»¶æ¥è®°å½• dependency treeï¼š\n\n```\n$ cat go.sum\ngithub.com/labstack/echo v3.3.10+incompatible h1:pGRcYk231ExFAyoAjAfD85kQzRJCRI8bbnE7CX5OEgg=\ngithub.com/labstack/echo v3.3.10+incompatible/go.mod h1:0INS7j/VjnFxD4E2wkz67b8cVwCLbBmJyDaka6Cmk1s=\ngithub.com/labstack/gommon v0.2.8 h1:JvRqmeZcfrHC5u6uVleB4NxxNbzx6gpbJiQknDbKQu0=\ngithub.com/labstack/gommon v0.2.8/go.mod h1:/tj9csK2iPSBvn+3NLM9e52usepMtrd5ilFYA+wQNJ4=\ngithub.com/mattn/go-colorable v0.1.1 h1:G1f5SKeVxmagw/IyvzvtZE4Gybcc4Tr1tf7I8z0XgOg=\ngithub.com/mattn/go-colorable v0.1.1/go.mod h1:FuOcm+DKB9mbwrcAfNl7/TZVBZ6rcnceauSikq3lYCQ=\n... çœç•¥å¾ˆå¤šè¡Œ\n```\n\n1. å†æ¬¡æ‰§è¡Œè„šæœ¬ `go run server.go` å‘ç°è·³è¿‡äº†æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–çš„æ­¥éª¤ã€‚\n2. å¯ä»¥ä½¿ç”¨å‘½ä»¤ `go list -m -u all` æ¥æ£€æŸ¥å¯ä»¥å‡çº§çš„packageï¼Œä½¿ç”¨`go get -u need-upgrade-package` å‡çº§åä¼šå°†æ–°çš„ä¾èµ–ç‰ˆæœ¬æ›´æ–°åˆ°go.mod\n   - ä¹Ÿå¯ä»¥ä½¿ç”¨ `go get -u` å‡çº§æ‰€æœ‰ä¾èµ–\n\n#### go get å‡çº§\n\n- è¿è¡Œ go get -u å°†ä¼šå‡çº§åˆ°æœ€æ–°çš„æ¬¡è¦ç‰ˆæœ¬æˆ–è€…ä¿®è®¢ç‰ˆæœ¬(x.y.z, zæ˜¯ä¿®è®¢ç‰ˆæœ¬å·ï¼Œ yæ˜¯æ¬¡è¦ç‰ˆæœ¬å·)\n- è¿è¡Œ go get -u=patch å°†ä¼šå‡çº§åˆ°æœ€æ–°çš„ä¿®è®¢ç‰ˆæœ¬\n- è¿è¡Œ go get package@version å°†ä¼šå‡çº§åˆ°æŒ‡å®šçš„ç‰ˆæœ¬å·version\n- è¿è¡Œgo getå¦‚æœæœ‰ç‰ˆæœ¬çš„æ›´æ”¹ï¼Œé‚£ä¹ˆgo.modæ–‡ä»¶ä¹Ÿä¼šæ›´æ”¹\n\n### ç¤ºä¾‹äºŒï¼šæ”¹é€ ç°æœ‰é¡¹ç›®(helloword)\n\né¡¹ç›®ç›®å½•ä¸ºï¼š\n\n```\n$ tree\n.\nâ”œâ”€â”€ api\nâ”‚   â””â”€â”€ apis.go\nâ””â”€â”€ server.go\n\n1 directory, 2 files\n```\n\nserver.go æºç ä¸ºï¼š\n\n```\npackage main\n\nimport (\n    api \"./api\"  // è¿™é‡Œä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„\n    \"github.com/labstack/echo\"\n)\n\nfunc main() {\n    e := echo.New()\n    e.GET(\"/\", api.HelloWorld)\n    e.Logger.Fatal(e.Start(\":1323\"))\n}\n```\n\napi/apis.go æºç ä¸ºï¼š\n\n```\npackage api\n\nimport (\n    \"net/http\"\n\n    \"github.com/labstack/echo\"\n)\n\nfunc HelloWorld(c echo.Context) error {\n    return c.JSON(http.StatusOK, \"hello world\")\n}\n```\n\n1. ä½¿ç”¨ `go mod init ***` åˆå§‹åŒ–go.mod\n\n```\n$ go mod init helloworld\ngo: creating new go.mod: module helloworld\n```\n\n1. è¿è¡Œ `go run server.go`\n\n```\ngo: finding github.com/labstack/gommon/color latest\ngo: finding github.com/labstack/gommon/log latest\ngo: finding golang.org/x/crypto/acme/autocert latest\ngo: finding golang.org/x/crypto/acme latest\ngo: finding golang.org/x/crypto latest\nbuild command-line-arguments: cannot find module for path _/home/gs/helloworld/api\n```\n\né¦–å…ˆè¿˜æ˜¯ä¼šæŸ¥æ‰¾å¹¶ä¸‹è½½å®‰è£…ä¾èµ–ï¼Œç„¶åè¿è¡Œè„šæœ¬ `server.go`ï¼Œè¿™é‡Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š\n\n```\nbuild command-line-arguments: cannot find module for path _/home/gs/helloworld/api\n```\n\nä½†æ˜¯`go.mod` å·²ç»æ›´æ–°ï¼š\n\n```\n$ cat go.mod\nmodule helloworld\n\ngo 1.12\n\nrequire (\n        github.com/labstack/echo v3.3.10+incompatible // indirect\n        github.com/labstack/gommon v0.2.8 // indirect\n        github.com/mattn/go-colorable v0.1.1 // indirect\n        github.com/mattn/go-isatty v0.0.7 // indirect\n        github.com/valyala/fasttemplate v1.0.0 // indirect\n        golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a // indirect\n)\n```\n\n#### é‚£ä¸ºä»€ä¹ˆä¼šæŠ›å‡ºè¿™ä¸ªé”™è¯¯å‘¢ï¼Ÿ\n\nè¿™æ˜¯å› ä¸º server.go ä¸­ä½¿ç”¨ internal package çš„æ–¹æ³•è·Ÿä»¥å‰å·²ç»ä¸åŒäº†ï¼Œç”±äº go.modä¼šæ‰«æåŒå·¥ä½œç›®å½•ä¸‹æ‰€æœ‰ package å¹¶ä¸”`å˜æ›´å¼•å…¥æ–¹æ³•`ï¼Œå¿…é¡»å°† helloworldå½“æˆè·¯å¾„çš„å‰ç¼€ï¼Œä¹Ÿå°±æ˜¯éœ€è¦å†™æˆ import helloworld/apiï¼Œä»¥å¾€ GOPATH/dep æ¨¡å¼å…è®¸çš„ import ./api å·²ç»å¤±æ•ˆï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹è¿™ä¸ª [issue](https://github.com/golang/go/issues/26645)ã€‚\n\n1. æ›´æ–°æ—§çš„package import æ–¹å¼\n\næ‰€ä»¥server.go éœ€è¦æ”¹å†™æˆï¼š\n\n```\npackage main\n\nimport (\n    api \"helloworld/api\"  // è¿™æ˜¯æ›´æ–°åçš„å¼•å…¥æ–¹æ³•\n    \"github.com/labstack/echo\"\n)\n\nfunc main() {\n    e := echo.New()\n    e.GET(\"/\", api.HelloWorld)\n    e.Logger.Fatal(e.Start(\":1323\"))\n}\n```\n\n> `ä¸€ä¸ªå°å‘`ï¼šå¼€å§‹åœ¨golang1.11 ä¸‹ä½¿ç”¨go mod é‡åˆ°è¿‡ `go build github.com/valyala/fasttemplate: module requires go 1.12` [è¿™ç§é”™è¯¯](https://github.com/golang/go/issues/27565)ï¼Œé‡åˆ°ç±»ä¼¼è¿™ç§éœ€è¦å‡çº§åˆ°1.12 çš„é—®é¢˜ï¼Œç›´æ¥å‡çº§golang1.12 å°±å¥½äº†ã€‚å¹¸äºæ˜¯åœ¨1.12 å‘å¸ƒåæ‰å°è¯•çš„`go mod` ğŸ¤·â€â™‚ï¸\n\n1. åˆ°è¿™é‡Œå°±å’Œæ–°åˆ›å»ºä¸€ä¸ªé¡¹ç›®æ²¡ä»€ä¹ˆåŒºåˆ«äº†\n\n#### ä½¿ç”¨replaceæ›¿æ¢æ— æ³•ç›´æ¥è·å–çš„package\n\nç”±äºæŸäº›å·²çŸ¥çš„åŸå› ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„packageéƒ½èƒ½æˆåŠŸä¸‹è½½ï¼Œæ¯”å¦‚ï¼š`golang.org`ä¸‹çš„åŒ…ã€‚\n\nmodules å¯ä»¥é€šè¿‡åœ¨ go.mod æ–‡ä»¶ä¸­ä½¿ç”¨ replace æŒ‡ä»¤æ›¿æ¢æˆgithubä¸Šå¯¹åº”çš„åº“ï¼Œæ¯”å¦‚ï¼š\n\n```\nreplace (\n    golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a => github.com/golang/crypto v0.0.0-20190313024323-a1f597ede03a\n)\n```\n\næˆ–è€…\n\n```\nreplace golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a => github.com/golang/crypto v0.0.0-20190313024323-a1f597ede03a\n```\n\n## å‚è€ƒé“¾æ¥\n\n- [Moduleså®˜æ–¹ä»‹ç»](https://github.com/golang/go/wiki/Modules)\n- [Golang 1.11 æ–°åŠŸèƒ½ä»‹ç´¹ â€“ Modules](https://www.lightblue.asia/golang-1-11-new-festures-modules/?doing_wp_cron=1552464864.6369309425354003906250)\n- [What are Go modules and how do I use them?](https://talks.godoc.org/github.com/myitcv/talks/2018-08-15-glug-modules/main.slide#1)\n- [go mod doesn't work for github.com/gomarkdown/markdown/html](https://github.com/golang/go/issues/27565)\n- [å†æ¢go modulesï¼šä½¿ç”¨ä¸ç»†èŠ‚](https://www.cnblogs.com/apocelipes/p/10295096.html)\n- [åˆçª¥Go module](https://tonybai.com/2018/07/15/hello-go-module/)\n\n#### References\n\n[1] Moduleså®˜æ–¹ä»‹ç»: [https://github.com/golang/go/...](https://github.com/golang/go/wiki/Modules)\n[2] issue: [https://github.com/golang/go/...](https://github.com/golang/go/issues/26645)\n[3] è¿™ç§é”™è¯¯: [https://github.com/golang/go/...](https://github.com/golang/go/issues/27565)\n[4] Moduleså®˜æ–¹ä»‹ç»: [https://github.com/golang/go/...](https://github.com/golang/go/wiki/Modules)\n[5] Golang 1.11 æ–°åŠŸèƒ½ä»‹ç´¹ â€“ Modules: [https://www.lightblue.asia/go...](https://www.lightblue.asia/golang-1-11-new-festures-modules/?doing_wp_cron=1552464864.6369309425354003906250)\n[6] What are Go modules and how do I use them?: [https://talks.godoc.org/githu...](https://talks.godoc.org/github.com/myitcv/talks/2018-08-15-glug-modules/main.slide#1)\n[7] go mod doesn't work for github.com/gomarkdown/markdown/html : [https://github.com/golang/go/...](https://github.com/golang/go/issues/27565)\n[8] å†æ¢go modulesï¼šä½¿ç”¨ä¸ç»†èŠ‚: [https://www.cnblogs.com/apoce...](https://www.cnblogs.com/apocelipes/p/10295096.html)\n[9] åˆçª¥Go module: [https://tonybai.com/2018/07/1...](https://tonybai.com/2018/07/15/hello-go-module/)","tags":["go","go mod"],"categories":["ç¼–ç¨‹è¯­è¨€","GO"]},{"title":"git æ–°å»ºä»“åº“ï¼Œæ·»åŠ è¿œç¨‹åˆ†ä¹‹åˆ°æœ¬åœ°","url":"/2019/12/09/gitæ–°å»ºä»“åº“/","content":"\n@[TOC]\n\n### æœ¬åœ°ä¸å­˜åœ¨ä»“åº“æ‹‰å–è¿œç¨‹åˆ†ä¹‹\n\n\n\n```bash\n$ echo \"# gin-web\" >> README.md\n$ git init\n$ git add README.md\n$ git commit -m \"first commit\"\n$ git remote add origin https://github.com/AlexBruceLu/gin-web.git\n$ git push -u origin master\n```\n\n### æœ¬åœ°å·²æœ‰çš„ä»“åº“æ·»åŠ åˆ°è¿œç¨‹\n\n\n\n```bash\n$ git remote add origin https://github.com/AlexBruceLu/gin-web.git\n$ git push -u origin master\n```\n\n### gitæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯æ”¹å\n\n```bash\n#1 å°†æœ¬åœ°åˆ†æ”¯è¿›è¡Œæ”¹å\n$ git branch -m old_branch new_branch\n \n#2 å°†è¿œç¨‹åˆ†æ”¯çš„è€åˆ†æ”¯åˆ é™¤\n$ git push origin :old_branch\n \n#3 å°†æ”¹ååçš„åˆ†æ”¯pushåˆ°è¿œç¨‹\n$ git push origin new_branch\n```\n\n","tags":["git"],"categories":["å·¥å…·","git"]},{"title":"Ubuntu 16.04 å‡çº§æœ€æ–°ç‰ˆæœ¬ nvidia-docker","url":"/2019/12/09/Ubuntu16.04å‡çº§æœ€æ–°ç‰ˆæœ¬nvidia-docker/","content":"\n@[TOC]\n\n### Uninstall old versions\n\nOlder versions of Docker were called `docker`, `docker.io `, or `docker-engine`. If these are installed, uninstall them:\n\n```\n$ sudo apt-get remove docker docker-engine docker.io containerd runc\n```\n\nItâ€™s OK if `apt-get` reports that none of these packages are installed.\n\nThe contents of `/var/lib/docker/`, including images, containers, volumes, and networks, are preserved. The Docker Engine - Community package is now called `docker-ce`.\n\n### Supported storage drivers\n\nDocker Engine - Community on Ubuntu supports `overlay2`, `aufs` and `btrfs` storage drivers.\n\n> **Note**: In Docker Engine - Enterprise, `btrfs` is only supported on SLES. See the documentation on [btrfs](https://docs.docker.com/engine/userguide/storagedriver/btrfs-driver/) for more details.\n\nFor new installations on version 4 and higher of the Linux kernel, `overlay2` is supported and preferred over `aufs`. Docker Engine - Community uses the `overlay2` storage driver by default. If you need to use `aufs` instead, you need to configure it manually. See [aufs](https://docs.docker.com/engine/userguide/storagedriver/aufs-driver/)\n\n### Install Docker Engine - Community\n\nYou can install Docker Engine - Community in different ways, depending on your needs:\n\n- Most users [set up Dockerâ€™s repositories](https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-using-the-repository) and install from them, for ease of installation and upgrade tasks. This is the recommended approach.\n- Some users download the DEB package and [install it manually](https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-from-a-package) and manage upgrades completely manually. This is useful in situations such as installing Docker on air-gapped systems with no access to the internet.\n- In testing and development environments, some users choose to use automated [convenience scripts](https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-using-the-convenience-script) to install Docker.\n\n### Install using the repository\n\nBefore you install Docker Engine - Community for the first time on a new host machine, you need to set up the Docker repository. Afterward, you can install and update Docker from the repository.\n\n#### SET UP THE REPOSITORY\n\n1. Update the `apt` package index:\n\n   ```\n   $ sudo apt-get update\n   ```\n\n2. Install packages to allow `apt` to use a repository over HTTPS:\n\n   ```\n   $ sudo apt-get install \\\n       apt-transport-https \\\n       ca-certificates \\\n       curl \\\n       gnupg-agent \\\n       software-properties-common\n   ```\n\n3. Add Dockerâ€™s official GPG key:\n\n   ```\n   $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n   ```\n\n   Verify that you now have the key with the fingerprint `9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88`, by searching for the last 8 characters of the fingerprint.\n\n   ```\n   $ sudo apt-key fingerprint 0EBFCD88\n\n   pub   rsa4096 2017-02-22 [SCEA]\n         9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88\n   uid           [ unknown] Docker Release (CE deb) <docker@docker.com>\n   sub   rsa4096 2017-02-22 [S]\n   ```\n\n4. Use the following command to set up the **stable** repository. To add the **nightly** or **test** repository, add the word `nightly` or `test` (or both) after the word `stable` in the commands below. [Learn about **nightly** and **test** channels](https://docs.docker.com/install/).\n\n   > **Note**: The `lsb_release -cs` sub-command below returns the name of your Ubuntu distribution, such as `xenial`. Sometimes, in a distribution like Linux Mint, you might need to change `$(lsb_release -cs)` to your parent Ubuntu distribution. For example, if you are using `Linux Mint Tessa`, you could use `bionic`. Docker does not offer any guarantees on untested and unsupported Ubuntu distributions.\n\n\n\n   - - x86_64 / amd64\n     - armhf\n     - arm64\n     - ppc64le (IBM Power)\n     - s390x (IBM Z)\n\n\n\n   ```\n   $ sudo add-apt-repository \\\n      \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n      $(lsb_release -cs) \\\n      stable\"\n   ```\n\n\n\n#### INSTALL DOCKER ENGINE - COMMUNITY\n\n1. Update the `apt` package index.\n\n   ```\n   $ sudo apt-get update\n   ```\n\n2. Install the *latest version* of Docker Engine - Community and containerd, or go to the next step to install a specific version:\n\n   ```\n   $ sudo apt-get install docker-ce docker-ce-cli containerd.io\n   ```\n\n   > **ï˜** Got multiple Docker repositories?\n   >\n   > If you have multiple Docker repositories enabled, installing or updating without specifying a version in the `apt-get install` or `apt-get update` command always installs the highest possible version, which may not be appropriate for your stability needs.\n\n3. To install a *specific version* of Docker Engine - Community, list the available versions in the repo, then select and install:\n\n   a. List the versions available in your repo:\n\n   ```\n   $ apt-cache madison docker-ce\n\n     docker-ce | 5:18.09.1~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages\n     docker-ce | 5:18.09.0~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages\n     docker-ce | 18.06.1~ce~3-0~ubuntu       | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages\n     docker-ce | 18.06.0~ce~3-0~ubuntu       | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages\n     ...\n   ```\n\n   b. Install a specific version using the version string from the second column, for example, `5:18.09.1~3-0~ubuntu-xenial`.\n\n   ```\n   $ sudo apt-get install docker-ce=<VERSION_STRING> docker-ce-cli=<VERSION_STRING> containerd.io\n   ```\n\n4. Verify that Docker Engine - Community is installed correctly by running the `hello-world` image.\n\n   ```shell\n   $ sudo docker run hello-world\n   ```","tags":["ubuntu","nvidia-docker"],"categories":["Linux","docker"]}]